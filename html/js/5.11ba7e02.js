webpackJsonp([5],{"+9iy":function(e,t,a){var o=a("3Q7Q");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("a04f53ce",o,!0,{})},"1eG2":function(e,t,a){"use strict";function o(e){a("Og+K")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("x/ko"),r=a.n(s);for(var i in s)["default","default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var n=a("RE/d"),l=a("VU/8"),c=o,u=l(r.a,n.a,!1,c,"data-v-5db9a46a",null);t.default=u.exports},"3Q7Q":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".form-group .form-control-feedback.glyphicon-eye-close[data-v-3b163743],.form-group .form-control-feedback.glyphicon-eye-open[data-v-3b163743]{pointer-events:auto;cursor:pointer}.model-lg[data-v-3b163743]{width:80%!important}",""])},"5gxX":function(e,t,a){"use strict";function o(e){a("LbQQ")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("qb8i"),r=a.n(s);for(var i in s)["default","default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var n=a("lGU5"),l=a("VU/8"),c=o,u=l(r.a,n.a,!1,c,null,null);t.default=u.exports},"5jDP":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["modal",{fade:e.fade}],attrs:{"data-backdrop":"static","data-disable":"false","data-keyboard":"true",tabindex:"-1"}},[a("div",{class:["modal-dialog",e.size]},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),a("h4",{staticClass:"modal-title text-center text-primary"},[a("span",[e._v(e._s(e.title))])])]),e._v(" "),a("div",{staticClass:"modal-body"},[a("el-tabs",{model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.bStatusLogLoading,expression:"bStatusLogLoading"}],attrs:{name:"status","element-loading-text":"加载中..."}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"fa fa-list-ul"}),e._v(" 状态记录")]),e._v(" "),e.statusLogs.length>0?a("el-timeline",{staticStyle:{"margin-top":"10px","min-height":"200px","max-height":"435px","overflow-y":"auto"}},e._l(e.statusLogs,function(t,o){return a("el-timeline-item",{key:o,attrs:{type:e.statusTimeLineType(t),timestamp:t.CreatedAt}},[e._v("\n                                "+e._s(e.formatStatus(t))+"\n                                  \n                                "),a("span",{class:["small",{"text-success":"ON"==t.Status,"text-red":"OFF"==t.Status&&"CLOSED"!=t.Description&&"STARTING"!=t.Description}]},[e._v(e._s(t.Description))])])})):a("p",{staticClass:"text-center"},[a("br"),e._v(" "),e.bStatusLogLoading?a("span",[e._v("暂无数据")]):e.statusDays&&e.statusDays>0?a("span",[e._v("最近"+e._s(e.statusDays)+"天没有状态变更记录")]):a("span",[e._v("未找到最近的状态变更记录")])])],1)],1)],1),e._v(" "),e._m(1)])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[e._v("关闭")])])}],r={render:o,staticRenderFns:s};t.a=r},"9nr/":function(e,t,a){"use strict";(function(e){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},r=a("M4fF"),i=o(r),n=a("5gxX"),l=o(n),c=a("TCl/"),u=o(c),d=a("1eG2"),m=o(d),f=a("TEyR"),v=o(f),p=a("KFrC"),h=o(p),g=a("NYxO");t.default={data:function(){return{q:"",online:"",enable:"",total:0,pageSize:10,currentPage:1,sort:"Serial",order:"asc",loading:!1,bgLoading:!1,timer:0,cascades:[],cascadeChannelListDlgTitle:"选择通道",cascadeSessionListDlgTitle:"级联会话列表"}},computed:s({},(0,g.mapState)(["userInfo","serverInfo"])),components:{UploadDlg:l.default,CascadeEditDlg:u.default,CascadeChannelListDlg:m.default,CascadeSessionListDlg:v.default,CascadeLogDlg:h.default},mounted:function(){},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},methods:{ready:function(){var e=this;this.$watch("q",function(e,t){this.doDelaySearch()}),this.$watch("online",function(e,t){this.doSearch()}),this.$watch("enable",function(e,t){this.doSearch()}),this.$watch("currentPage",function(e,t){this.doSearch(e)}),this.timer=setInterval(function(){e.getCascades(!1)},3e3)},doSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t={};this.q&&(t.q=this.q),this.online&&(t.online=this.online),this.enable&&(t.enable=this.enable),this.$router.replace({path:"/cascade/"+e,query:t})},doDelaySearch:i.default.debounce(function(){this.doSearch()},800),getCascades:function(){var t=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(a)this.loading=!0;else{if(this.bgLoading||this.loading)return;this.bgLoading=!0}e.ajax({method:"GET",url:"/api/v1/cascade/list",global:a,data:{q:this.q,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,online:this.online,enable:this.enable,sort:this.sort,order:this.order}}).then(function(e){t.total=e.CascadeCount,t.cascades=e.CascadeList}).always(function(){a?t.loading=!1:t.bgLoading=!1})},sortChange:function(e){this.sort=e.prop,this.order="ascending"==e.order?"asc":"desc",this.getCascades()},formatStatus:function(e,t,a){var o=a;return e.Online&&e.Load&&(o?o+=", Load["+e.Load+"]":o="Load["+e.Load+"]"),o},editCascade:function(e){this.$refs.cascadeEditDlg.show(e)},editChannel:function(e){this.cascadeChannelListDlgTitle="选择通道("+(e.Name||e.ID)+")",this.$refs.cascadeChannelListDlg.show(e.ID)},showSession:function(e){this.cascadeSessionListDlgTitle="级联会话列表("+(e.Name||e.ID)+")",this.$refs.cascadeSessionListDlg.show(e.ID,e.Serial,e.Name)},showStatusLog:function(e){this.$refs.cascadeLogDlg.show(e)},pushChannel:function(t){var a=this;if(!t.Online)return void this.$message({type:"error",message:"平台不在线!"});e.post("/api/v1/cascade/pushcatalog",{id:t.ID}).then(function(){a.$message({type:"success",message:"推送通道信息成功"})})},removeCascade:function(t){var a=this;this.$confirm("确认删除 "+(t.Name||t.ID),"提示",{lockScroll:!1}).then(function(){e.post("/api/v1/cascade/remove",{id:t.ID}).always(function(){a.getCascades()})}).catch(function(){})},download:function(){window.open("/api/v1/cascade/export")},uploaded:function(){this.$message({type:"success",message:"上传成功！"}),this.getCascades(),this.$refs.uploadDlg.hide()},toggleEnable:function(t){e.post("/api/v1/cascade/setenable",{id:t.ID,enable:!t.Enable}).then(function(){t.Enable=!t.Enable})}},beforeRouteEnter:function(e,t,a){a(function(t){t.q=e.query.q||"",t.online=e.query.online||"",t.enable=e.query.enable||"",t.currentPage=parseInt(e.params.page)||1,t.ready()})},beforeRouteUpdate:function(e,t,a){var o=this;a(),this.$nextTick(function(){o.q=e.query.q||"",o.online=e.query.online||"",o.enable=e.query.enable||"",o.currentPage=parseInt(e.params.page)||1,o.cascades=[],o.total=0,o.getCascades()})}}}).call(t,a("0iPh"))},BgxG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElTimelineItem",inject:["timeline"],props:{timestamp:String,hideTimestamp:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:String,color:String,size:{type:String,default:"normal"},icon:String}}},JkFl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("BgxG"),s=a.n(o);for(var r in o)["default","default"].indexOf(r)<0&&function(e){a.d(t,e,function(){return o[e]})}(r);var i=a("x5s2"),n=a("VU/8"),l=n(s.a,i.a,!1,null,null,null);t.default=l.exports},KFrC:function(e,t,a){"use strict";function o(e){a("RPYZ")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("s39V"),r=a.n(s);for(var i in s)["default","default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var n=a("5jDP"),l=a("VU/8"),c=o,u=l(r.a,n.a,!1,c,"data-v-8554f8a8",null);t.default=u.exports},LbQQ:function(e,t,a){var o=a("rF1v");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("080cae9a",o,!0,{})},OObi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElTimeline",props:{reverse:{type:Boolean,default:!1}},provide:function(){return{timeline:this}},render:function(){var e=arguments[0],t=this.reverse,a={"el-timeline":!0,"is-reverse":t},o=this.$slots.default||[];return t&&(o=o.reverse()),e("ul",{class:a},[o])}}},OV9y:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".opt-group .cell{overflow:visible}",""])},"Og+K":function(e,t,a){var o=a("jFRz");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("3f4ea3cc",o,!0,{})},"RE/d":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["modal",{fade:e.fade}],attrs:{"data-backdrop":"static","data-disable":"false","data-keyboard":"true",tabindex:"-1"}},[a("div",{class:["modal-dialog",e.size]},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),a("h4",{staticClass:"modal-title text-center text-primary"},[a("span",[e._v(e._s(e.title))])])]),e._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[a("div",{staticClass:"form-group form-group-sm"},[a("label",[e._v("搜索")]),e._v(" "),!e.isMobile()&&e.hasAnyRole(e.serverInfo,e.userInfo,"管理员")?a("div",{staticClass:"input-group input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:e.q},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.preventDefault()},input:function(t){t.target.composing||(e.q=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),a("div",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导出级联通道",disabled:e.shareAllChannel},on:{click:function(t){t.preventDefault(),e.download(t)}}},[a("i",{staticClass:"fa fa-download"})]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导入级联通道",disabled:e.shareAllChannel},on:{click:function(t){t.preventDefault(),e.upload(t)}}},[a("i",{staticClass:"fa fa-upload"})])])]):a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:e.q},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.preventDefault()},input:function(t){t.target.composing||(e.q=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("span",{staticClass:"hidden-xs"},[e._v("  ")]),e._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("label",[e._v("通道类型")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.channel_type,expression:"channel_type",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.channel_type=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),a("option",{attrs:{value:"device"}},[e._v("设备")]),e._v(" "),a("option",{attrs:{value:"dir"}},[e._v("子目录")])])]),e._v(" "),a("span",{staticClass:"hidden-xs"},[e._v("  ")]),e._v(" "),"device"==e.channel_type?a("div",{staticClass:"form-group form-group-sm"},[a("label",[e._v("在线状态")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.online,expression:"online",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.online=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),a("option",{attrs:{value:"true"}},[e._v("在线")]),e._v(" "),a("option",{attrs:{value:"false"}},[e._v("离线")])])]):e._e(),e._v(" "),"device"==e.channel_type?a("span",{staticClass:"hidden-xs"},[e._v("  ")]):e._e(),e._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("div",{staticClass:"checkbox",staticStyle:{"user-select":"none"}},[a("el-checkbox",{staticStyle:{"margin-top":"-5px","padding-left":"0"},attrs:{size:"small",name:"Related",disabled:e.shareAllChannel},model:{value:e.related,callback:function(t){e.related="string"==typeof t?t.trim():t},expression:"related"}},[e._v("\n                                只看"+e._s(e.reverse?"未选":"已选")+"("+e._s(e.relateCnt)+")\n                            ")]),e._v(" "),a("span",{style:e.shareAllChannel?"cursor:not-allowed;":""},[a("a",{class:{"text-gray":e.shareAllChannel},style:{"pointer-events":e.shareAllChannel?"none":"all"},attrs:{role:"button"},on:{click:e.toggleReverse}},[a("i",{staticClass:"fa fa-sort"})])])],1)]),e._v(" "),a("span",{staticClass:"hidden-xs"},[e._v("  ")]),e._v(" "),!e.userInfo||e.userInfo.HasAllChannel?a("div",{staticClass:"form-group form-group-sm"},[a("div",{staticClass:"checkbox"},[a("el-checkbox",{staticStyle:{"margin-top":"-5px","padding-left":"0"},attrs:{size:"small",name:"ShareAllChannel"},on:{change:e.toggleShareAllChannel},model:{value:e.shareAllChannel,callback:function(t){e.shareAllChannel=t},expression:"shareAllChannel"}},[e._v("全部共享")])],1)]):e._e()]),e._v(" "),a("br"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"channelTable",attrs:{data:e.channels,stripe:"","max-height":500,"element-loading-text":"加载中..."},on:{"sort-change":e.sortChange,select:e.select,"select-all":e.selectAll}},[a("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",selectable:e.selectable}}),e._v(" "),a("el-table-column",{attrs:{prop:"DeviceID",label:"设备国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ID",label:"通道国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CustomID",label:"自定义通道国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.Editing?a("input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"170px",padding:"2px","line-height":"100%"},attrs:{type:"text",oninput:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:t.row.CustomID||t.row.ID},on:{keydown:[function(a){if(!("button"in a)&&e._k(a.keyCode,"esc",27,a.key))return null;a.stopPropagation(),a.preventDefault(),e.setChannelID(t.row,!1,a)},function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key))return null;a.stopPropagation(),a.preventDefault(),e.setChannelID(t.row,!1,a)}],blur:function(a){e.setChannelID(t.row,!1,a)}}}):a("a",{class:{"text-orange":!!t.row.CustomID},attrs:{role:"button"},on:{click:function(a){a.preventDefault(),e.setChannelID(t.row,!0,a)}}},[e._v(e._s(t.row.CustomID||t.row.ID))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Name",label:"通道名称","min-width":"160",formatter:e.formatName,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",label:"快照"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isDir(t.row)?a("span",[a("i",{staticClass:"fa fa-sitemap"})]):a("el-popover",{attrs:{"open-delay":1e3,"close-delay":10,placement:"left",title:t.row.ID,width:"400",trigger:"hover"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{onerror:"this.src='/images/default_snap.png';",src:t.row.SnapURL}}),e._v(" "),a("img",{staticStyle:{height:"30px",width:"50px"},attrs:{slot:"reference",onerror:"this.src='/images/default_snap.png';",src:t.row.SnapURL},slot:"reference"})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Status",label:"在线状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isDir(t.row)?a("span",[e._v("-")]):t.row.DeviceOnline&&"ON"==(t.row.CustomStatus||t.row.Status)?a("span",{class:{"text-success":"ON"==t.row.Status,"text-orange":!!t.row.CustomStatus}},[e._v("在线")]):a("span",{class:{"text-orange":!!t.row.CustomStatus}},[e._v("离线")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Manufacturer",label:"厂家","min-width":"120",formatter:e.formatManufacturer,"show-overflow-tooltip":""}})],1),e._v(" "),e.total>0?a("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next,sizes","pager-count":e.isMobile()?3:5,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:pageSize":function(t){e.pageSize=t},"update:currentPage":function(t){e.currentPage=t}}}):e._e(),e._v(" "),a("div",{staticClass:"clearfix"})],1)])]),e._v(" "),a("el-upload",{staticClass:"hide",attrs:{action:"/api/v1/cascade/channel/import?id="+e.id,accept:".xlsx","show-file-list":!1,"on-success":e.onUploadSuccess,"on-error":e.onUploadError,"on-progress":e.onUploadProgress}},[a("a",{ref:"uploadButton",attrs:{role:"button",title:"上传级联通道"}},[a("i",{staticClass:"fa fa-upload"}),e._v(" 上传级联通道\n        ")])])],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],r={render:o,staticRenderFns:s};t.a=r},RPYZ:function(e,t,a){var o=a("RqX9");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("b6bf9ce6",o,!0,{})},RfWQ:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function o(s,r){try{var i=t[s](r),n=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(n).then(function(e){o("next",e)},function(e){o("throw",e)});e(n)}return o("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=a("A9K1"),i=o(r),n=a("0iPh"),l=o(n);t.default={props:{serverInfo:{type:Object,default:function(){}},userInfo:{type:Object,default:function(){return null}}},data:function(){return{form:this.defForm(),debug:!1,showCivilCodeLimit:!1,showDigestAlgorithm:!1,showMergeRecord:!1,bCertUploading:!1,bRawPwd:!0}},watch:{"form.Serial":function(e,t){0===t.indexOf(this.form.Realm)&&(e.length>=10?this.form.Realm=e.substr(0,10):this.form.Realm=e)}},components:{FormDlg:i.default},beforeDestroy:function(){(0,l.default)(this.$el).off("keydown",this.keyDown)},computed:{alertMsg:function(){var e=[];this.form.StreamKeepalive&&e.push("RTCP 流保活, 需要上级支持"),this.form.StreamReader&&e.push("强制推送H264编码, 可能带来额外的性能消耗"),this.form.DigestAlgorithm&&"MD5"!=this.form.DigestAlgorithm&&e.push("指定摘要算法, 需要上级支持"),this.form.GM&&e.push("开启 35114 国密认证, 需要上级支持");var t="";return e.length>0&&(t=e.join("; ")),t}},methods:{defForm:function(){return{ID:"",Enable:!1,Name:"",Serial:"",Realm:"",Host:"",Port:5060,LocalSerial:"",LocalHost:"",LocalPort:"",Username:"",Password:"",Online:!1,Status:"",RegisterTimeout:3600,KeepaliveInterval:60,RegisterInterval:300,StreamKeepalive:!1,StreamReader:!1,BindLocalIP:!1,AllowControl:!0,ShareRecord:!0,MergeRecord:!1,ShareAllChannel:!1,CommandTransport:"UDP",Charset:"GB2312",CatalogGroupSize:1,LoadLimit:"",CivilCodeLimit:8,DigestAlgorithm:"",GM:!1,Cert:""}},onHide:function(){this.debug=!1,this.showCivilCodeLimit=!1,this.showDigestAlgorithm=!1,this.showMergeRecord=!1,this.bCertUploading=!1,this.form=this.defForm(),(0,l.default)(this.$el).off("keydown",this.keyDown)},onShow:function(){this.bRawPwd=!1,this.errors.clear(),(0,l.default)(this.$el).on("keydown",this.keyDown)},keyDown:function(e){if(e.altKey&&e.shiftKey)switch(e.key){case"D":e.preventDefault(),this.toggleDebug()}},toggleDebug:function(){this.debug=!this.debug},onSubmit:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(a=t.sent){t.next=8;break}return o=e.errors.items[0],e.$message({type:"error",message:o.msg}),(0,l.default)("[name="+o.field+"]").focus(),t.abrupt("return");case 8:l.default.post("/api/v1/cascade/save",e.form).then(function(t){e.$refs.dlg.hide(),e.$emit("submit")});case 9:case"end":return t.stop()}},t,e)}))()},show:function(e){var t=this;this.bRawPwd=!0,this.errors.clear(),e&&Object.assign(this.form,e),this.form.LocalPort||(this.form.LocalPort=""),this.form.LoadLimit||(this.form.LoadLimit=""),this.form.CivilCodeLimit&&(this.showCivilCodeLimit=8!=this.form.CivilCodeLimit),this.form.DigestAlgorithm&&(this.showDigestAlgorithm="MD5"!=this.form.DigestAlgorithm),this.form.MergeRecord&&(this.showMergeRecord=!0),this.$nextTick(function(){t.$refs.dlg.show()})},onUploadCertSuccess:function(e,t,a){this.bCertUploading=!1,this.form.Cert=e},onUploadCertProgress:function(e,t,a){this.bCertUploading=!0},onUploadCertError:function(e,t,a){this.bCertUploading=!1,e&&this.$message({type:"error",message:e+""})},removeCert:function(){var e=this;(0,l.default)(this.$el).hide(),this.$confirm("确认删除服务证书?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1}).then(function(){(0,l.default)(e.$el).show().focus(),l.default.post("/api/v1/gm/cert/remove?cascade="+e.form.ID).then(function(){e.form.Cert=""})}).catch(function(){(0,l.default)(e.$el).show().focus()})}}}},RqX9:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".modal-content[data-v-8554f8a8]{overflow:hidden}@media screen and (min-width:992px){.modal-dialog.modal-lgg[data-v-8554f8a8]{width:90%}}@media screen and (min-width:1200px){.modal-dialog.modal-lgg[data-v-8554f8a8]{width:1200px}}",""])},"TCl/":function(e,t,a){"use strict";function o(e){a("+9iy")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("RfWQ"),r=a.n(s);for(var i in s)["default","default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var n=a("nuHb"),l=a("VU/8"),c=o,u=l(r.a,n.a,!1,c,"data-v-3b163743",null);t.default=u.exports},TEyR:function(e,t,a){"use strict";function o(e){a("a5WK")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("j5el"),r=a.n(s);for(var i in s)["default","default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var n=a("zDZr"),l=a("VU/8"),c=o,u=l(r.a,n.a,!1,c,"data-v-2e8aeee5",null);t.default=u.exports},TTNq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("OObi"),s=a.n(o);for(var r in o)["default","default"].indexOf(r)<0&&function(e){a.d(t,e,function(){return o[e]})}(r);var i=a("VU/8"),n=i(s.a,null,!1,null,null,null);t.default=n.exports},WNNu:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"box box-primary"},[e._m(0),e._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[a("div",{staticClass:"form-group form-group-sm"},[a("div",{staticClass:"input-group input-group-sm"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.$refs.cascadeEditDlg.show()}}},[a("i",{staticClass:"fa fa-plus"}),e._v(" 添加上级平台\n                        ")])])]),e._v(" "),a("span",{staticClass:"hidden-xs"},[e._v("  ")]),e._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("label",[e._v("搜索")]),e._v(" "),!e.isMobile()&&e.hasAnyRole(e.serverInfo,e.userInfo,"超级管理员")?a("div",{staticClass:"input-group input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:e.q},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.preventDefault()},input:function(t){t.target.composing||(e.q=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),a("div",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导出级联列表"},on:{click:function(t){t.preventDefault(),e.download(t)}}},[a("i",{staticClass:"fa fa-download"})]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导入级联列表"},on:{click:function(t){t.preventDefault(),e.$refs.uploadDlg.show()}}},[a("i",{staticClass:"fa fa-upload"})])])]):a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:e.q},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.preventDefault()},input:function(t){t.target.composing||(e.q=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("span",{staticClass:"hidden-xs"},[e._v("  ")]),e._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("label",[e._v("开启状态")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.enable,expression:"enable",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.enable=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),a("option",{attrs:{value:"true"}},[e._v("启用")]),e._v(" "),a("option",{attrs:{value:"false"}},[e._v("关闭")])])]),e._v(" "),a("span",{staticClass:"hidden-xs"},[e._v("  ")]),e._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("label",[e._v("在线状态")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.online,expression:"online",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.online=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),a("option",{attrs:{value:"true"}},[e._v("在线")]),e._v(" "),a("option",{attrs:{value:"false"}},[e._v("离线")])])])]),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"clearfix"}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.cascades,stripe:"","default-sort":{prop:"CreatedAt",order:"descending"},"element-loading-text":"加载中..."},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{prop:"Name",label:"名称","min-width":"140","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"300",fixed:!e.isMobile()&&"right","class-name":"opt-group"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"btn-group btn-group-xs"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),e.editCascade(t.row)}}},[a("i",{staticClass:"fa fa-edit"}),e._v(" 编辑\n                            ")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),e.editChannel(t.row)}}},[a("i",{staticClass:"fa fa-check"}),e._v(" 选择通道\n                            ")]),e._v(" "),t.row.Online?a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),e.pushChannel(t.row)}}},[a("i",{staticClass:"fa fa-angle-double-up"}),e._v(" 推送通道\n                            ")]):e._e(),e._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),e.removeCascade(t.row)}}},[a("i",{staticClass:"fa fa-remove"}),e._v(" 删除\n                            ")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Serial",label:"SIP服务国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Enable",label:"是否启用","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{value:t.row.Enable},on:{change:function(a){e.toggleEnable(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Online",label:"在线状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasAnyRole(e.serverInfo,e.userInfo,"超级管理员")?a("span",[a("a",{class:[{"text-success":t.row.Online,"text-gray":!t.row.Online}],attrs:{role:"button",title:"点击查看状态记录"},on:{click:function(a){a.preventDefault(),e.showStatusLog(t.row)}}},[e._v("\n                                "+e._s(t.row.Online?"在线":"离线")+"\n                            ")])]):t.row.Online?a("span",{staticClass:"text-success"},[e._v("在线")]):a("span",{staticClass:"text-gray"},[e._v("离线")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Status",label:"状态描述","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.Online&&t.row.Load&&e.hasAnyRole(e.serverInfo,e.userInfo,"超级管理员")?a("a",{staticClass:"text-success",attrs:{role:"button",title:"点击查看会话列表"},on:{click:function(a){e.showSession(t.row)}}},[e._v("\n                            "+e._s(t.row.Status)+", Load["+e._s(t.row.Load)+"]\n                        ")]):a("span",[e._v(e._s(t.row.Status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Host",label:"SIP服务IP","min-width":"140","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Port",label:"SIP服务端口","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"LocalSerial",label:"设备国标编号","min-width":"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"RegisterInterval",label:"注册周期(秒)","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"KeepaliveInterval",label:"心跳周期(秒)","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CatalogGroupSize",label:"目录分组大小","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CommandTransport",label:"信令传输","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Charset",label:"字符集","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"UpdatedAt",label:"更新时间","min-width":"160",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CreatedAt",label:"创建时间","min-width":"160",sortable:"custom"}})],1)],1),e._v(" "),e.total>0?a("div",{staticClass:"box-footer"},[a("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next","pager-count":e.isMobile()?3:5,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:pageSize":function(t){e.pageSize=t},"update:currentPage":function(t){e.currentPage=t}}})],1):e._e()]),e._v(" "),a("UploadDlg",{ref:"uploadDlg",attrs:{title:"上传级联列表",url:"/api/v1/cascade/import"},on:{uploaded:e.uploaded}}),e._v(" "),a("CascadeEditDlg",{ref:"cascadeEditDlg",attrs:{serverInfo:e.serverInfo,userInfo:e.userInfo},on:{submit:e.getCascades}}),e._v(" "),a("CascadeChannelListDlg",{ref:"cascadeChannelListDlg",attrs:{serverInfo:e.serverInfo,userInfo:e.userInfo,title:e.cascadeChannelListDlgTitle}}),e._v(" "),a("CascadeSessionListDlg",{ref:"cascadeSessionListDlg",attrs:{serverInfo:e.serverInfo,userInfo:e.userInfo,title:e.cascadeSessionListDlgTitle}}),e._v(" "),a("CascadeLogDlg",{ref:"cascadeLogDlg"})],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box-header"},[a("h4",{staticClass:"text-primary text-center"},[e._v("上级平台级联列表")])])}],r={render:o,staticRenderFns:s};t.a=r},a5WK:function(e,t,a){var o=a("lPNc");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("7b69dd58",o,!0,{})},j5el:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),a("F8S1");var s=a("0iPh"),r=o(s),i=a("M4fF"),n=o(i);t.default={props:{title:{default:""},size:{type:String,default:"modal-lgg"},fade:{type:Boolean,default:!1},serverInfo:{type:Object,default:function(){}},userInfo:{type:Object,default:function(){return null}}},data:function(){return{q:"",session_type:"",total:0,pageSize:10,currentPage:1,sort:"",order:"",loading:!1,sessions:[],id:"",serial:"",name:""}},watch:{q:function(e,t){this.doDelaySearch()},session_type:function(e,t){this.doSearch()},currentPage:function(e,t){this.doSearch(e)},pageSize:function(e,t){this.doSearch()}},mounted:function(){var e=this;(0,r.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,r.default)(this.$el).on("shown.bs.modal",function(){e.$emit("show")}).on("hidden.bs.modal",function(){e.errors.clear(),e.reset(),e.$emit("hide")})},methods:{sortChange:function(e){this.sort=e.prop,this.order="ascending"==e.order?"asc":"desc",this.getSessions()},doSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e,this.getSessions()},doDelaySearch:n.default.debounce(function(){this.doSearch()},800),formatInBitRate:function(e,t,a){return a?a+" Kbps":"-"},formatVideoCodec:function(e,t,a){return"hevc"==a?"H265":"h264"==a?"H264":a||"-"},formatTransport:function(e,t,a){var o=e.CascadeTransport||"-";return 0==o.indexOf("tcp")&&e.CascadeSetup&&(o+=" "+e.CascadeSetup),o},formatChannelName:function(e,t,a){return a||"-"},formatSessionType:function(e,t,a){switch(e.SessionType){case"stream":return"直播";case"playback":return"回放";case"download":return"下载";case"broadcast":return"对讲"}return e.SessionType||"-"},formatSessionDuration:function(e,t,a){return this.formatDuration(e.Duration||0)},getSessions:function(e){var t=this;this.id&&(this.loading=!0,r.default.get("/api/v1/cascade/session/list",{id:this.id,q:this.q,session_type:this.session_type,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,sort:this.sort,order:this.order}).then(function(a){t.total=a.total,t.sessions=a.rows||[],e&&e.target&&t.$message({type:"success",message:"刷新成功！"})}).always(function(){t.loading=!1}))},stopSession:function(e){var t=this;(0,r.default)(this.$el).hide(),this.$confirm("确认停止 "+(e.ChannelName||e.ChannelID||e.CallID)+" 会话?","提示",{lockScroll:!1}).then(function(){(0,r.default)(t.$el).show().focus(),r.default.post("/api/v1/cascade/session/stop",{id:t.id,serial:t.serial,sid:e.CallID+":"+e.From+":"+e.To}).always(function(){t.getSessions()})}).catch(function(){(0,r.default)(t.$el).show().focus()})},clearSessions:function(){var e=this;(0,r.default)(this.$el).hide(),this.$confirm("确认清空 "+(this.name||this.serial)+" 会话?","提示",{lockScroll:!1}).then(function(){(0,r.default)(e.$el).show().focus(),r.default.post("/api/v1/cascade/session/clear",{id:e.id,serial:e.serial}).always(function(){e.getSessions()})}).catch(function(){(0,r.default)(e.$el).show().focus()})},reset:function(){this.id="",this.serial="",this.name="",this.sessions=[],this.q="",this.session_type="",this.currentPage=1,this.pageSize=10},show:function(e,t,a){this.id=e,this.serial=t||"",this.name=a||"",(0,r.default)(this.$el).modal("show"),this.getSessions()},hide:function(){(0,r.default)(this.$el).modal("hide")}}}},jFRz:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".modal-content[data-v-5db9a46a]{overflow:hidden}@media screen and (min-width:992px){.modal-dialog.modal-lgg[data-v-5db9a46a]{width:90%}}@media screen and (min-width:1200px){.modal-dialog.modal-lgg[data-v-5db9a46a]{width:1200px}}",""])},lGU5:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal fade upload-dlg",attrs:{"data-backdrop":"static","data-keyboard":"true",tabindex:"-1"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),a("h4",{staticClass:"modal-title text-center text-info"},[a("span",[e._v(e._s(e.title))])])]),e._v(" "),a("div",{staticClass:"modal-body"},[e._t("header"),e._v(" "),a("el-upload",{ref:"uploader",attrs:{drag:e.drag,action:e.url,multiple:e.multiple,"show-file-list":e.showFileList,limit:1,"on-success":e.onSuccess,"on-progress":e.onProgress,"on-error":e.onError,"on-remove":e.onRemove,accept:e.accept,"before-upload":e.beforeUpload,"auto-upload":e.autoUpload}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将配置数据拖到此处，或 "),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip text-center",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tip)),a("span",{staticStyle:{color:"red"}},[e._v(" *上传成功会自动删除原有数据，请注意导出备份*")])])]),e._v(" "),e._t("footer")],2),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal",disabled:e.bProgress}},[e._v("关闭")])])])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],r={render:o,staticRenderFns:s};t.a=r},lPNc:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".modal-content[data-v-2e8aeee5]{overflow:hidden}@media screen and (min-width:992px){.modal-dialog.modal-lgg[data-v-2e8aeee5]{width:90%}}@media screen and (min-width:1200px){.modal-dialog.modal-lgg[data-v-2e8aeee5]{width:1200px}}",""])},"m/uX":function(e,t,a){"use strict";function o(e){a("nMA0")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("9nr/"),r=a.n(s);for(var i in s)["default","default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var n=a("WNNu"),l=a("VU/8"),c=o,u=l(r.a,n.a,!1,c,null,null);t.default=u.exports},nMA0:function(e,t,a){var o=a("OV9y");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("2369945e",o,!0,{})},nuHb:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("FormDlg",{directives:[{name:"loading",rawName:"v-loading",value:e.bCertUploading,expression:"bCertUploading"}],ref:"dlg",attrs:{title:"编辑上级平台级联",disabled:e.errors.any()||e.bCertUploading,size:"modal-lgg"},on:{hide:e.onHide,show:e.onShow,submit:e.onSubmit}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.ID,expression:"form.ID",modifiers:{trim:!0}}],attrs:{type:"hidden",name:"ID"},domProps:{value:e.form.ID},on:{input:function(t){t.target.composing||e.$set(e.form,"ID",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{class:{"form-group":!0,"has-error":e.errors.has("Name")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"name"}},[e._v("名称\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.Name,expression:"form.Name",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"Name","data-vv-as":"名称"},domProps:{value:e.form.Name},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#serial").focus()},input:function(t){t.target.composing||e.$set(e.form,"Name",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("Serial")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"serial"}},[e._v("SIP服务ID\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.Serial,expression:"form.Serial",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"serial",name:"Serial","data-vv-as":"SIP服务ID"},domProps:{value:e.form.Serial},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#realm").focus()},input:function(t){t.target.composing||e.$set(e.form,"Serial",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("Realm")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"realm"}},[e._v("SIP服务域\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.Realm,expression:"form.Realm",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"text",id:"realm",name:"Realm","data-vv-as":"SIP服务域",placeholder:"选填"},domProps:{value:e.form.Realm},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#host").focus()},input:function(t){t.target.composing||e.$set(e.form,"Realm",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("Host")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"host"}},[e._v("SIP服务IP\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.Host,expression:"form.Host",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"host",name:"Host","data-vv-as":"SIP服务IP"},domProps:{value:e.form.Host},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#port").focus()},input:function(t){t.target.composing||e.$set(e.form,"Host",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("Port")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"port"}},[e._v("SIP服务端口\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.Port,expression:"form.Port",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"form-control",attrs:{type:"text",id:"port",name:"Port","data-vv-as":"SIP服务端口"},domProps:{value:e.form.Port},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#local-serial").focus()},input:function(t){t.target.composing||e.$set(e.form,"Port",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("LocalSerial")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"local-serial"}},[e._v("设备国标编号\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.LocalSerial,expression:"form.LocalSerial",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"text",id:"local-serial",name:"LocalSerial","data-vv-as":"设备国标编号",placeholder:"默认使用 livecms.ini > sip > serial"},domProps:{value:e.form.LocalSerial},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#local-host").focus()},input:function(t){t.target.composing||e.$set(e.form,"LocalSerial",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("LocalHost")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"local-host"}},[e._v("本地IP\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.LocalHost,expression:"form.LocalHost",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"text",id:"local-host",name:"LocalHost","data-vv-as":"本地IP",placeholder:"默认使用 livecms.ini > sip > host"},domProps:{value:e.form.LocalHost},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#local-port").focus()},input:function(t){t.target.composing||e.$set(e.form,"LocalHost",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("LocalPort")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"local-port"}},[e._v("本地端口\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.LocalPort,expression:"form.LocalPort",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"}],staticClass:"form-control",attrs:{type:"text",id:"local-port",name:"LocalPort","data-vv-as":"本地端口",placeholder:"选填"},domProps:{value:e.form.LocalPort},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#username").focus()},input:function(t){t.target.composing||e.$set(e.form,"LocalPort",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.debug||e.showDigestAlgorithm,expression:"debug || showDigestAlgorithm"}],class:{"form-group":!0,"has-error":e.errors.has("DigestAlgorithm")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"digest-algorithm"}},[e._v("摘要算法\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.DigestAlgorithm,expression:"form.DigestAlgorithm",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{id:"digest-algorithm",name:"DigestAlgorithm","data-vv-as":"摘要算法"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"DigestAlgorithm",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("MD5")]),e._v(" "),a("option",{attrs:{value:"SHA-256"}},[e._v("SHA-256")]),e._v(" "),a("option",{attrs:{value:"SHA-1"}},[e._v("SHA-1")])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.serverInfo.GM||e.form.GM,expression:"serverInfo.GM || form.GM"}],class:{"form-group":!0,"has-error":e.errors.has("GM")}},[a("label",{staticClass:"col-sm-4 control-label"},[e._v("35114 国密认证\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7 checkbox"},[a("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"GM"},model:{value:e.form.GM,callback:function(t){e.$set(e.form,"GM","string"==typeof t?t.trim():t)},expression:"form.GM"}},[e._v("\n                    启用国密  \n                ")]),e._v(" "),e.form.GM&&e.form.Cert?a("a",{attrs:{href:"/api/v1/gm/cert/download?cascade="+e.form.ID,target:"_blank",title:"下载远端服务国密证书"}},[a("i",{staticClass:"fa fa-download"}),e._v(" 下载证书  \n                ")]):e._e(),e._v(" "),e.form.GM&&e.form.Cert?a("a",{attrs:{role:"button",title:"删除远端服务国密证书"},on:{click:e.removeCert}},[a("i",{staticClass:"fa fa-remove"}),e._v(" 删除证书\n                ")]):e._e(),e._v(" "),e.form.GM&&!e.form.Cert?a("el-upload",{staticStyle:{display:"inline-block","margin-right":"7px"},attrs:{action:"/api/v1/gm/cert/import?cascade="+e.form.ID,accept:".pem,.cer,.crt,.csr,.der","show-file-list":!1,"on-success":e.onUploadCertSuccess,"on-error":e.onUploadCertError,"on-progress":e.onUploadCertProgress}},[a("a",{attrs:{role:"button",title:"上传远端服务国密证书"}},[a("i",{staticClass:"fa fa-upload"}),e._v(" 上传服务证书\n                    ")])]):e._e()],1)]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("StreamKeepalive")}},[a("label",{staticClass:"col-sm-4 control-label"},[e._v("其它选项\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7 checkbox"},[a("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"Enable"},model:{value:e.form.Enable,callback:function(t){e.$set(e.form,"Enable","string"==typeof t?t.trim():t)},expression:"form.Enable"}},[e._v("\n                    启用级联  \n                ")]),e._v(" "),a("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"AllowControl",title:"是否允许上级平台操作云台"},model:{value:e.form.AllowControl,callback:function(t){e.$set(e.form,"AllowControl","string"==typeof t?t.trim():t)},expression:"form.AllowControl"}},[e._v("\n                    云台控制  \n                ")]),e._v(" "),a("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"ShareRecord",title:"是否共享录像给上级"},model:{value:e.form.ShareRecord,callback:function(t){e.$set(e.form,"ShareRecord","string"==typeof t?t.trim():t)},expression:"form.ShareRecord"}},[e._v("\n                    共享录像  \n                ")]),e._v(" "),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.form.ShareRecord&&(e.debug||e.showMergeRecord),expression:"form.ShareRecord && (debug || showMergeRecord)"}],staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"MergeRecord",title:"是否合并录像以减少上报条数"},model:{value:e.form.MergeRecord,callback:function(t){e.$set(e.form,"MergeRecord","string"==typeof t?t.trim():t)},expression:"form.MergeRecord"}},[e._v("\n                    合并录像\n                ")])],1)])]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{class:{"form-group":!0,"has-error":e.errors.has("Username")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"username"}},[e._v("SIP认证用户名\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.Username,expression:"form.Username",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"text",id:"username",name:"Username","data-vv-as":"SIP认证用户名",placeholder:"默认使用 设备国标编号"},domProps:{value:e.form.Username},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#password").focus()},input:function(t){t.target.composing||e.$set(e.form,"Username",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("Password")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"password"}},[e._v("SIP认证密码\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7"},[e.bRawPwd?a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.Password,expression:"form.Password",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"text",id:"password",name:"Password","data-vv-as":"SIP认证密码"},domProps:{value:e.form.Password},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#register-interval").focus()},input:function(t){t.target.composing||e.$set(e.form,"Password",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}):a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.Password,expression:"form.Password",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"password",id:"password",name:"Password",autocomplete:"new-password","data-vv-as":"SIP认证密码"},domProps:{value:e.form.Password},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#register-interval").focus()},input:function(t){t.target.composing||e.$set(e.form,"Password",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),e.bRawPwd?a("span",{staticClass:"glyphicon glyphicon-eye-open form-control-feedback text-gray",on:{click:function(t){e.bRawPwd=!e.bRawPwd}}}):a("span",{staticClass:"glyphicon glyphicon-eye-close form-control-feedback text-gray",on:{click:function(t){e.bRawPwd=!e.bRawPwd}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("RegisterInterval")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"register-interval"}},[e._v("注册周期(秒)\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.RegisterInterval,expression:"form.RegisterInterval",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"form-control",attrs:{type:"text",id:"register-interval",name:"RegisterInterval","data-vv-as":"注册周期"},domProps:{value:e.form.RegisterInterval},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#keepalive-interval").focus()},input:function(t){t.target.composing||e.$set(e.form,"RegisterInterval",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("KeepaliveInterval")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"keepalive-interval"}},[e._v("心跳周期(秒)\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.KeepaliveInterval,expression:"form.KeepaliveInterval",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"form-control",attrs:{type:"text",id:"keepalive-interval",name:"KeepaliveInterval","data-vv-as":"心跳周期"},domProps:{value:e.form.KeepaliveInterval},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$el.querySelector("#load-limit").focus()},input:function(t){t.target.composing||e.$set(e.form,"KeepaliveInterval",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("LoadLimit")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"load-limit"}},[e._v("流并发数限制\n                ")]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:e.form.LoadLimit,expression:"form.LoadLimit",modifiers:{trim:!0,number:!0}},{name:"validate",rawName:"v-validate",value:"integer",expression:"'integer'"}],staticClass:"form-control",attrs:{type:"text",id:"load-limit",name:"LoadLimit","data-vv-as":"流并发数限制",placeholder:"选填"},domProps:{value:e.form.LoadLimit},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit(t)},input:function(t){t.target.composing||e.$set(e.form,"LoadLimit",e._n(t.target.value.trim()))},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("CatalogGroupSize")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"catalog-group-size"}},[e._v("目录分组大小\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.CatalogGroupSize,expression:"form.CatalogGroupSize",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{id:"catalog-group-size",name:"CatalogGroupSize","data-vv-as":"目录分组大小"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"CatalogGroupSize",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[e._v("1")]),e._v(" "),a("option",{attrs:{value:"2"}},[e._v("2")]),e._v(" "),a("option",{attrs:{value:"4"}},[e._v("4")]),e._v(" "),a("option",{attrs:{value:"8"}},[e._v("8")]),e._v(" "),a("option",{attrs:{value:"16"}},[e._v("16")]),e._v(" "),a("option",{attrs:{value:"32"}},[e._v("32")]),e._v(" "),a("option",{attrs:{value:"64"}},[e._v("64")])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.debug||e.showCivilCodeLimit,expression:"debug || showCivilCodeLimit"}],class:{"form-group":!0,"has-error":e.errors.has("CivilCodeLimit")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"civil-code-limit"}},[e._v("行政区划长\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.CivilCodeLimit,expression:"form.CivilCodeLimit",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{id:"civil-code-limit",name:"CivilCodeLimit","data-vv-as":"行政区划长"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"CivilCodeLimit",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"2"}},[e._v("2")]),e._v(" "),a("option",{attrs:{value:"4"}},[e._v("4")]),e._v(" "),a("option",{attrs:{value:"6"}},[e._v("6")]),e._v(" "),a("option",{attrs:{value:"8"}},[e._v("8")]),e._v(" "),a("option",{attrs:{value:"10"}},[e._v("10")]),e._v(" "),a("option",{attrs:{value:"12"}},[e._v("12")]),e._v(" "),a("option",{attrs:{value:"20"}},[e._v("20")])])])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("CommandTransport")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"command-transport"}},[e._v("信令传输\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.CommandTransport,expression:"form.CommandTransport",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{id:"command-transport",name:"CommandTransport","data-vv-as":"信令传输"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"CommandTransport",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"UDP"}},[e._v("UDP")]),e._v(" "),a("option",{attrs:{value:"TCP"}},[e._v("TCP")])])])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("Charset")}},[a("label",{staticClass:"col-sm-4 control-label",attrs:{for:"charset"}},[e._v("字符集\n                "),a("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"col-sm-7"},[a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.Charset,expression:"form.Charset",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{id:"charset",name:"Charset","data-vv-as":"字符集"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"Charset",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"GB2312"}},[e._v("GB2312")]),e._v(" "),a("option",{attrs:{value:"GB18030"}},[e._v("GB18030")]),e._v(" "),a("option",{attrs:{value:"UTF-8"}},[e._v("UTF-8")])])])]),e._v(" "),a("div",{class:{"form-group":!0,"has-error":e.errors.has("StreamReader")}},[a("label",{staticClass:"col-sm-4 control-label"}),e._v(" "),a("div",{staticClass:"col-sm-7 checkbox"},[a("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"StreamKeepalive",title:"开启RTCP流保活可防止产生野流"},model:{value:e.form.StreamKeepalive,callback:function(t){e.$set(e.form,"StreamKeepalive","string"==typeof t?t.trim():t)},expression:"form.StreamKeepalive"}},[e._v("\n                    RTCP流保活  \n                ")]),e._v(" "),a("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"StreamReader"},model:{value:e.form.StreamReader,callback:function(t){e.$set(e.form,"StreamReader","string"==typeof t?t.trim():t)},expression:"form.StreamReader"}},[e._v("\n                    强制推送H264  \n                ")]),e._v(" "),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.form.LocalHost,expression:"form.LocalHost"}],staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"BindLocalIP"},model:{value:e.form.BindLocalIP,callback:function(t){e.$set(e.form,"BindLocalIP","string"==typeof t?t.trim():t)},expression:"form.BindLocalIP"}},[e._v("\n                    绑定本地IP\n                ")])],1)])]),e._v(" "),a("div",{staticClass:"clearfix"}),e._v(" "),a("template",{attrs:{slot:"footer"},slot:"footer"},[e.alertMsg?a("div",{staticClass:"inline text-orange"},[a("small",[a("strong",[a("i",{staticClass:"fa fa-info-circle"}),e._v(" 提示 :   ")]),e._v("\n                "+e._s(e.alertMsg)+"\n                  \n            ")])]):e._e()])],2)},s=[],r={render:o,staticRenderFns:s};t.a=r},qb8i:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a("F8S1");var o=a("0iPh"),s=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={props:{title:{default:"上传"},url:{type:String,default:""},multiple:{type:Boolean,default:!1},drag:{type:Boolean,default:!0},showFileList:{type:Boolean,default:!0},accept:{default:".xlsx"},tip:{default:"仅限上传.xlsx"},limit:{type:Number,default:0},autoUpload:{type:Boolean,default:!0}},data:function(){return{bShow:!1,bProgress:!1}},mounted:function(){var e=this;(0,s.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,s.default)(this.$el).on("shown.bs.modal",function(){e.$emit("show"),e.bShow=!0}).on("hidden.bs.modal",function(){e.$emit("hide"),e.bShow=!1,e.$refs.uploader.clearFiles()}).on("hide.bs.modal",function(){if(e.bProgress)return e.$message({type:"error",message:"正在上传, 请稍后..."}),!1})},methods:{show:function(){(0,s.default)(this.$el).modal("show")},hide:function(){(0,s.default)(this.$el).modal("hide")},beforeUpload:function(e){return!(this.limit&&e.size>this.limit)||(this.$message({type:"error",message:"文件["+e.name+"]大小超过限制["+this.limit+"], 不能上传!"}),!1)},onSuccess:function(e,t,a){var o=!0,s=!1,r=void 0;try{for(var i,n=a[Symbol.iterator]();!(o=(i=n.next()).done);o=!0){var l=i.value;if(100!=l.percentage&&0!==l.percentage)return void(this.bProgress=!0)}}catch(e){s=!0,r=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw r}}this.bProgress=!1,this.$emit("uploaded",t)},onProgress:function(e,t,a){this.bProgress=!0},onError:function(e,t,a){e&&this.$message({type:"error",message:e+""});var o=!0,s=!1,r=void 0;try{for(var i,n=a[Symbol.iterator]();!(o=(i=n.next()).done);o=!0){var l=i.value;if(100!=l.percentage&&0!==l.percentage)return void(this.bProgress=!0)}}catch(e){s=!0,r=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw r}}this.bProgress=!1},onRemove:function(e,t){var a=!0,o=!1,s=void 0;try{for(var r,i=t[Symbol.iterator]();!(a=(r=i.next()).done);a=!0){var n=r.value;if(100!=n.percentage&&0!==n.percentage)return void(this.bProgress=!0)}}catch(e){o=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw s}}this.bProgress=!1}}}},rF1v:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".upload-dlg .modal-dialog .modal-body{overflow:hidden}.upload-dlg .modal-dialog .modal-body .el-upload{display:block}.upload-dlg .modal-dialog .modal-body .el-upload .el-upload-dragger{margin:0 auto}",""])},s39V:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),a("F8S1");var s=a("0iPh"),r=o(s),i=a("TTNq"),n=o(i),l=a("JkFl"),c=o(l);t.default={props:{size:{type:String,default:""},fade:{type:Boolean,default:!1},limit:{type:Number,default:20}},data:function(){return{tabName:"status",title:"状态记录",cascadeInfo:null,statusLogs:[],statusDays:0,bStatusLogLoading:!1}},components:{ElTimeline:n.default,ElTimelineItem:c.default},mounted:function(){var e=this;(0,r.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,r.default)(this.$el).on("shown.bs.modal",function(){e.$emit("show")}).on("hidden.bs.modal",function(){e.reset(),e.$emit("hide")})},methods:{getStatusLogs:function(){var e=this;this.cascadeInfo&&(this.bStatusLogLoading=!0,this.statusLogs=[],r.default.get("/api/v1/cascade/statuslog",{id:this.cascadeInfo.ID,limit:this.limit}).then(function(t){t&&(e.statusLogs=t.LogList||[],e.statusDays=t.LogReserveDays||0)}).always(function(){e.$nextTick(function(){e.bStatusLogLoading=!1})}))},formatStatus:function(e){switch(e.Status){case"ON":return"在线";case"OFF":return"离线"}return e.Status},statusTimeLineType:function(e){var t="primary";if(!e)return t;switch(e.Status){case"ON":t="primary";break;case"OFF":t="warning";break;case"DEL":t="danger";break;default:t="info"}return t},reset:function(){this.title="状态记录",this.cascadeInfo=null,this.statusLogs=[],this.statusDays=0},show:function(e){this.title="级联("+e.Name+")",this.cascadeInfo=e,(0,r.default)(this.$el).modal("show"),this.getStatusLogs()},hide:function(){(0,r.default)(this.$el).modal("hide")}}}},"x/ko":function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),a("F8S1");var s=a("0iPh"),r=o(s),i=a("M4fF"),n=o(i);t.default={props:{title:{default:""},size:{type:String,default:"modal-lgg"},fade:{type:Boolean,default:!1},serverInfo:{type:Object,default:function(){}},userInfo:{type:Object,default:function(){return null}}},data:function(){return{q:"",channel_type:"",online:"",total:0,relateCnt:0,pageSize:10,currentPage:1,sort:"",order:"",related:!1,reverse:!1,shareAllChannel:!1,loading:!1,channels:[],selection:[],id:""}},watch:{q:function(e,t){this.doDelaySearch()},channel_type:function(e,t){this.doSearch()},online:function(e,t){this.doSearch()},related:function(e,t){this.doSearch()},reverse:function(e,t){this.doSearch()},currentPage:function(e,t){this.doSearch(e)},pageSize:function(e,t){this.doSearch()}},mounted:function(){var e=this;(0,r.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,r.default)(this.$el).on("shown.bs.modal",function(){e.$emit("show")}).on("hidden.bs.modal",function(){e.errors.clear(),e.reset(),e.$emit("hide")})},directives:{focus:{inserted:function(e){e.focus(),e.select()}}},methods:{sortChange:function(e){this.sort=e.prop,this.order="ascending"==e.order?"asc":"desc",this.getChannels()},select:function(e,t){var a=this;e.indexOf(t)>=0?r.default.post("/api/v1/cascade/savechannels",{id:this.id,channels:[t.DeviceID+":"+t.ID]}).always(function(){a.getChannels()}):r.default.post("/api/v1/cascade/removechannels",{id:this.id,channels:[t.DeviceID+":"+t.ID]}).always(function(){a.getChannels()})},selectAll:function(e){var t=this;if(!this.shareAllChannel){var a=[];if(e.length){var o=!0,s=!1,i=void 0;try{for(var n,l=e[Symbol.iterator]();!(o=(n=l.next()).done);o=!0){var c=n.value;this.selection.indexOf(c)<0&&a.push(c.DeviceID+":"+c.ID)}}catch(e){s=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw i}}r.default.post("/api/v1/cascade/savechannels",{id:this.id,channels:a}).always(function(){t.getChannels()})}else{var u=!0,d=!1,m=void 0;try{for(var f,v=this.selection[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var c=f.value;a.push(c.DeviceID+":"+c.ID)}}catch(e){d=!0,m=e}finally{try{!u&&v.return&&v.return()}finally{if(d)throw m}}r.default.post("/api/v1/cascade/removechannels",{id:this.id,channels:a}).always(function(){t.getChannels()})}}},doSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e,this.getChannels()},doDelaySearch:n.default.debounce(function(){this.doSearch()},800),formatName:function(e,t,a){var o=e.DeviceCustomName||e.DeviceName||"",s=e.CustomName||e.Name||"";return o&&o!=s&&(s=s?s+"@"+o:o),s||"-"},formatDeviceName:function(e,t,a){return e.DeviceCustomName||e.DeviceName||"-"},formatChannelName:function(e,t,a){return e.CustomName||e.Name||"-"},formatManufacturer:function(e,t,a){return a||"-"},selectable:function(e,t){return!this.shareAllChannel},getChannels:function(){var e=this;this.id&&(this.loading=!0,r.default.get("/api/v1/cascade/channellist",{id:this.id,q:this.q,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,channel_type:this.channel_type,online:"device"==this.channel_type?this.online:"",related:this.related,reverse:this.reverse,sort:this.sort,order:this.order}).then(function(t){e.$refs.channelTable.clearSelection(),e.total=t.ChannelCount,e.relateCnt=t.ChannelRelateCount,e.shareAllChannel=!!t.ShareAllChannel,e.channels=t.ChannelList||[],e.selection=[],e.$nextTick(function(){e.channels.forEach(function(t){var a=""!=t.CascadeID;e.$refs.channelTable.toggleRowSelection(t,a),a&&e.selection.push(t)})})}).always(function(){e.$nextTick(function(){e.loading=!1})}))},isDir:function(e){if(e){if(e.SubCount>0)return!0;if(this.serverInfo.StrictChannelParental&&1==e.Parental)return!0;if(this.serverInfo.StrictChannelCode&&e.ID.length<=10)return!0;if(1==e.Parental&&"LiveQing"==e.Manufacturer)return!0;if(20==e.ID.length&&("216"==e.ID.substring(10,13)||"215"==e.ID.substring(10,13)))return!0}return!1},reset:function(){this.id="",this.$refs.channelTable.clearSelection(),this.channels=[],this.selection=[],this.q="",this.channel_type="",this.online="",this.related=!1,this.reverse=!1,this.total=0,this.relateCnt=0,this.shareAllChannel=!1,this.currentPage=1,this.pageSize=10},toggleShareAllChannel:function(e){var t=this;r.default.post("/api/v1/cascade/setshareallchannel",{id:this.id,shareallchannel:e}).always(function(){t.doSearch()})},setChannelID:function(e,t,a){var o=e.Editing;if(this.$set(e,"Editing",t),o&&!t){var s=a.target.value.trim();s==e.ID&&(s=""),e.CustomID!=s&&r.default.post("/api/v1/device/setchannelid",{serial:e.DeviceID,code:e.ID,id:s}).then(function(t){e.CustomID=s})}},show:function(e){this.id=e,(0,r.default)(this.$el).modal("show"),this.getChannels()},hide:function(){(0,r.default)(this.$el).modal("hide")},download:function(){window.open("/api/v1/cascade/channel/export?id="+this.id)},upload:function(){this.$refs.uploadButton.click()},onUploadSuccess:function(e,t,a){var o=this;this.loading=!1,this.$message({type:"success",message:"上传成功"}),this.$nextTick(function(){o.getChannels()})},onUploadProgress:function(e,t,a){this.loading=!0},onUploadError:function(e,t,a){this.loading=!1,e&&this.$message({type:"error",message:e+""})},toggleReverse:function(){this.reverse=!this.reverse}}}},x5s2:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"el-timeline-item"},[a("div",{staticClass:"el-timeline-item__tail"}),e._v(" "),e.$slots.dot?e._e():a("div",{staticClass:"el-timeline-item__node",class:["el-timeline-item__node--"+(e.size||""),"el-timeline-item__node--"+(e.type||"")],style:{backgroundColor:e.color}},[e.icon?a("i",{staticClass:"el-timeline-item__icon",class:e.icon}):e._e()]),e._v(" "),e.$slots.dot?a("div",{staticClass:"el-timeline-item__dot"},[e._t("dot")],2):e._e(),e._v(" "),a("div",{staticClass:"el-timeline-item__wrapper"},[e.hideTimestamp||"top"!==e.placement?e._e():a("div",{staticClass:"el-timeline-item__timestamp is-top"},[e._v("\n\t\t\t"+e._s(e.timestamp)+"\n\t\t")]),e._v(" "),a("div",{staticClass:"el-timeline-item__content"},[e._t("default")],2),e._v(" "),e.hideTimestamp||"bottom"!==e.placement?e._e():a("div",{staticClass:"el-timeline-item__timestamp is-bottom"},[e._v("\n\t\t\t"+e._s(e.timestamp)+"\n\t\t")])])])},s=[],r={render:o,staticRenderFns:s};t.a=r},zDZr:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["modal",{fade:e.fade}],attrs:{"data-backdrop":"static","data-disable":"false","data-keyboard":"true",tabindex:"-1"}},[a("div",{class:["modal-dialog",e.size]},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),a("h4",{staticClass:"modal-title text-center text-primary"},[a("span",[e._v(e._s(e.title))])])]),e._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[a("div",{staticClass:"form-group form-group-sm"},[a("label",[e._v("搜索")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:e.q},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.preventDefault()},input:function(t){t.target.composing||(e.q=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("span",{staticClass:"hidden-xs"},[e._v("  ")]),e._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("label",[e._v("会话类型")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.session_type,expression:"session_type",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.session_type=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),a("option",{attrs:{value:"stream"}},[e._v("直播")]),e._v(" "),a("option",{attrs:{value:"playback"}},[e._v("回放")]),e._v(" "),a("option",{attrs:{value:"download"}},[e._v("下载")]),e._v(" "),a("option",{attrs:{value:"broadcast"}},[e._v("对讲")])])]),e._v(" "),a("div",{staticClass:"form-group form-group-sm pull-right"},[a("div",{staticClass:"btn-group btn-group-sm"},[e.sessions.length?a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.clearSessions(t)}}},[a("i",{staticClass:"fa fa-remove"}),e._v(" 清空")]):e._e(),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.getSessions(t)}}},[a("i",{staticClass:"fa fa-refresh"}),e._v(" 刷新")])])])]),e._v(" "),a("br"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.sessions,stripe:"","default-sort":{prop:"StartAt",order:"descending"},"max-height":500,"element-loading-text":"加载中..."},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{prop:"DeviceID",label:"设备国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ChannelID",label:"通道国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"100",fixed:!e.isMobile()&&"right","class-name":"opt-group"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"btn-group btn-group-xs"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),e.stopSession(t.row)}}},[a("i",{staticClass:"fa fa-stop"}),e._v(" 停止\n                                ")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ChannelName",label:"通道名称","min-width":"120",formatter:e.formatChannelName,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"SessionType",label:"会话类型","min-width":"100",formatter:e.formatSessionType}}),e._v(" "),a("el-table-column",{attrs:{prop:"StartAt",label:"开始时间","min-width":"160",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Duration",label:"持续时长","min-width":"120",formatter:e.formatSessionDuration,sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Transport",label:"流传输","min-width":"250",formatter:e.formatTransport,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"InBitRate",label:"码率","min-width":"120",formatter:e.formatInBitRate,align:"right","show-overflow-tooltip":"",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SourceVideoCodecName",label:"视频编码","min-width":"100",formatter:e.formatVideoCodec}}),e._v(" "),a("el-table-column",{attrs:{prop:"SMS",label:"SMS","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}})],1),e._v(" "),e.total>0?a("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next,sizes","pager-count":e.isMobile()?3:5,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:pageSize":function(t){e.pageSize=t},"update:currentPage":function(t){e.currentPage=t}}}):e._e(),e._v(" "),a("div",{staticClass:"clearfix"})],1)])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],r={render:o,staticRenderFns:s};t.a=r}});