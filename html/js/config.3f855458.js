webpackJsonp([9],{"/ld9":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){function a(r,o){try{var i=t[r](o),l=i.value}catch(e){return void s(e)}if(!i.done)return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)});e(l)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},i=s("vGyV"),l=a(i),n=s("gbb/"),c=a(n),m=s("0iPh"),v=a(m),u=s("PJh5"),p=a(u),d=s("NYxO");t.default={data:function(){return{bCommitting:!1,bUploading:!1,bCertLoading:!1,bMapUploading:!1,bRawPwd:!0,Serial:"",Realm:"",Host:"",Port:0,DevicePassword:"",confirmDevicePassword:!1,TimeServer:"",PreferStreamFmt:"",AckTimeout:0,KeepaliveTimeout:0,APIAuth:!1,remoteAPIAuth:void 0,confirmAPIAuth:!1,LiveStreamAuth:!1,SIPLog:!1,AllowStreamStartByURL:!1,MapEnable:!1,MapCenter:"",BlackIPList:"",BlackUAList:"",remoteBasicData:"",remoteSMSData:"",smsserial:"",smss:[],sms:{},smsbaseconfig:{},smstip:"流媒体服务尚未启动",HTTPSPort:"",HTTPSCertFile:"",HTTPSKeyFile:"",timer:0,bShowMore:!1,GlobalChannelShared:!1,GlobalChannelAudio:!1,GlobalDeviceCatalogSubscribeInterval:0,GlobalDeviceAlarmSubscribeInterval:0,GlobalDevicePositionSubscribeInterval:0,GlobalDevicePTZSubscribeInterval:0,globalDeviceCatalogSubscribeInterval:0,globalDeviceAlarmSubscribeInterval:0,globalDevicePositionSubscribeInterval:0,globalDevicePTZSubscribeInterval:0,global_catalog_subscribe:!1,global_alarm_subscribe:!1,global_position_subscribe:!1,global_ptz_subscribe:!1,DropChannelType:"",dropChannelTypes:[],innerChannelTypes:{134:"报警输入",135:"报警输出",136:"语音输入",137:"语音输出",200:"中心信令",215:"业务分组",216:"虚拟组织"},GM:!1,GMCACert:"",GMCerts:[],MediaTransport:"UDP",MediaTransportMode:"passive"}},components:{GmReqDlg:l.default,GmCertDlg:c.default},watch:{Serial:function(e,t){0===t.indexOf(this.Realm)&&(e.length>=10?this.Realm=e.substr(0,10):this.Realm=e)},"smsbaseconfig.Serial":function(e){0===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").indexOf(this.smsbaseconfig.Realm)&&(e.length>=10?this.smsbaseconfig.Realm=e.substr(0,10):this.smsbaseconfig.Realm=e)},APIAuth:function(e,t){e||(this.confirmAPIAuth=!1)},DevicePassword:function(e,t){e||(this.confirmDevicePassword=!1)}},mounted:function(){this.getBaseConfig(),this.getGMCerts()},beforeDestroy:function(){this.timer&&(clearTimeout(this.timer),this.timer=0)},methods:o({},(0,d.mapActions)(["getServerInfo"]),{onSubmit:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var s,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(s=t.sent){t.next=8;break}return a=e.errors.items[0],e.$message({type:"error",message:a.msg}),(0,v.default)("[name="+a.field+"]").focus(),t.abrupt("return");case 8:if(r=e.getBasicCommitObject(),!e.remoteAPIAuth||r.APIAuth||e.confirmAPIAuth){t.next=12;break}return e.$message({type:"error",message:"关闭接口鉴权, 需要确认知悉安全风险"}),t.abrupt("return");case 12:if(r.DevicePassword||e.confirmDevicePassword){t.next=15;break}return e.$message({type:"error",message:"缺少设备统一接入密码, 需要确认知悉安全风险"}),t.abrupt("return");case 15:e.bCommitting=!0,v.default.post("/api/v1/setbaseconfig",r).then(function(t){e.$message({type:"success",message:"配置成功！"}),e.getBaseConfig(),e.getServerInfo()}).always(function(){e.bCommitting=!1});case 17:case"end":return t.stop()}},t,e)}))()},onSubmitSMS:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var s,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(s=t.sent){t.next=8;break}return a=e.errors.items[0],e.$message({type:"error",message:a.msg}),(0,v.default)("[name="+a.field+"]").focus(),t.abrupt("return");case 8:if(!(e.smsbaseconfig.CleanOverDays&&e.smsbaseconfig.CleanOverDays<0)){t.next=11;break}return e.$message({type:"error",message:"录像保留(天数)不能小于0"}),t.abrupt("return");case 11:if(!(e.smsbaseconfig.CleanFreespacePercent<0)){t.next=14;break}return e.$message({type:"error",message:"存储清理阀值(百分比)不能小于0"}),t.abrupt("return");case 14:if(!(e.smsbaseconfig.CleanFreespaceSize<0)){t.next=17;break}return e.$message({type:"error",message:"存储清理阀值(MB)不能小于0"}),t.abrupt("return");case 17:if(!e.smsbaseconfig.UseWanIPRecvStream||e.smsbaseconfig.WanIP){t.next=20;break}return e.$message({type:"error",message:"外网 IP 收流, 外网 IP 不能为空"}),t.abrupt("return");case 20:e.bCommitting=!0,v.default.post("/api/v1/sms/setbaseconfig",e.smsbaseconfig).then(function(t){e.$message({type:"success",message:"配置保存中, 请稍后..."}),e.smstip="配置保存中, 请稍后...",e.smsserial="",e.getSMSList()}).always(function(){e.bCommitting=!1});case 22:case"end":return t.stop()}},t,e)}))()},getBasicCommitObject:function(){return this.DropChannelType=this.dropChannelTypes.join(","),this.global_catalog_subscribe&&this.GlobalDeviceCatalogSubscribeInterval<=0?this.globalDeviceCatalogSubscribeInterval>0?this.GlobalDeviceCatalogSubscribeInterval=this.globalDeviceCatalogSubscribeInterval:this.GlobalDeviceCatalogSubscribeInterval=3600:!this.global_catalog_subscribe&&this.GlobalDeviceCatalogSubscribeInterval>0&&(this.GlobalDeviceCatalogSubscribeInterval=0),this.global_alarm_subscribe&&this.GlobalDeviceAlarmSubscribeInterval<=0?this.globalDeviceAlarmSubscribeInterval>0?this.GlobalDeviceAlarmSubscribeInterval=this.globalDeviceAlarmSubscribeInterval:this.GlobalDeviceAlarmSubscribeInterval=3600:!this.global_alarm_subscribe&&this.GlobalDeviceAlarmSubscribeInterval>0&&(this.GlobalDeviceAlarmSubscribeInterval=0),this.global_position_subscribe&&this.GlobalDevicePositionSubscribeInterval<=0?this.globalDevicePositionSubscribeInterval>0?this.GlobalDevicePositionSubscribeInterval=this.globalDevicePositionSubscribeInterval:this.GlobalDevicePositionSubscribeInterval=3600:!this.global_position_subscribe&&this.GlobalDevicePositionSubscribeInterval>0&&(this.GlobalDevicePositionSubscribeInterval=0),this.global_ptz_subscribe&&this.GlobalDevicePTZSubscribeInterval<=0?this.globalDevicePTZSubscribeInterval>0?this.GlobalDevicePTZSubscribeInterval=this.globalDevicePTZSubscribeInterval:this.GlobalDevicePTZSubscribeInterval=3600:!this.global_ptz_subscribe&&this.GlobalDevicePTZSubscribeInterval>0&&(this.GlobalDevicePTZSubscribeInterval=0),{Serial:this.Serial,Realm:this.Realm,Host:this.Host,Port:this.Port,DevicePassword:this.DevicePassword,TimeServer:this.TimeServer,PreferStreamFmt:this.PreferStreamFmt,AckTimeout:this.AckTimeout,KeepaliveTimeout:this.KeepaliveTimeout,APIAuth:this.APIAuth,LiveStreamAuth:this.LiveStreamAuth,GM:this.GM,SIPLog:this.SIPLog,AllowStreamStartByURL:this.AllowStreamStartByURL,BlackIPList:this.BlackIPList,BlackUAList:this.BlackUAList,HTTPSPort:this.HTTPSPort,HTTPSCertFile:this.HTTPSCertFile,HTTPSKeyFile:this.HTTPSKeyFile,GlobalChannelShared:this.GlobalChannelShared,GlobalChannelAudio:this.GlobalChannelAudio,GlobalDeviceCatalogSubscribeInterval:this.GlobalDeviceCatalogSubscribeInterval,GlobalDeviceAlarmSubscribeInterval:this.GlobalDeviceAlarmSubscribeInterval,GlobalDevicePositionSubscribeInterval:this.GlobalDevicePositionSubscribeInterval,GlobalDevicePTZSubscribeInterval:this.GlobalDevicePTZSubscribeInterval,DropChannelType:this.DropChannelType,MapEnable:this.MapEnable,MapCenter:this.MapCenter,MediaTransport:this.MediaTransport,MediaTransportMode:this.MediaTransportMode}},getBaseConfig:function(){var e=this;v.default.get("/api/v1/getbaseconfig").then(function(t){e.Serial=t.Serial,e.Realm=t.Realm,e.Host=t.Host,e.Port=t.Port,e.TimeServer=t.TimeServer,e.PreferStreamFmt=t.PreferStreamFmt,e.AckTimeout=t.AckTimeout,e.KeepaliveTimeout=t.KeepaliveTimeout,e.APIAuth=t.APIAuth,e.remoteAPIAuth=t.APIAuth,e.LiveStreamAuth=t.LiveStreamAuth||!1,e.SIPLog=t.SIPLog,e.AllowStreamStartByURL=t.AllowStreamStartByURL,e.BlackIPList=t.BlackIPList,e.BlackUAList=t.BlackUAList,e.HTTPSPort=t.HTTPSPort||"",e.HTTPSCertFile=t.HTTPSCertFile,e.HTTPSKeyFile=t.HTTPSKeyFile,e.GlobalChannelShared=t.GlobalChannelShared||!1,e.GlobalChannelAudio=t.GlobalChannelAudio||!1,e.GlobalDeviceCatalogSubscribeInterval=t.GlobalDeviceCatalogSubscribeInterval||0,e.GlobalDeviceAlarmSubscribeInterval=t.GlobalDeviceAlarmSubscribeInterval||0,e.GlobalDevicePositionSubscribeInterval=t.GlobalDevicePositionSubscribeInterval||0,e.GlobalDevicePTZSubscribeInterval=t.GlobalDevicePTZSubscribeInterval||0,e.globalDeviceCatalogSubscribeInterval=e.GlobalDeviceCatalogSubscribeInterval,e.globalDeviceAlarmSubscribeInterval=e.GlobalDeviceAlarmSubscribeInterval,e.globalDevicePositionSubscribeInterval=e.GlobalDevicePositionSubscribeInterval,e.globalDevicePTZSubscribeInterval=e.GlobalDevicePTZSubscribeInterval,e.global_catalog_subscribe=e.GlobalDeviceCatalogSubscribeInterval>0,e.global_alarm_subscribe=e.GlobalDeviceAlarmSubscribeInterval>0,e.global_position_subscribe=e.GlobalDevicePositionSubscribeInterval>0,e.global_ptz_subscribe=e.GlobalDevicePTZSubscribeInterval>0,e.DropChannelType=t.DropChannelType||"",e.DropChannelType?e.dropChannelTypes=e.DropChannelType.split(","):e.dropChannelTypes=[],e.GM=!!t.GM,e.GMCACert=t.GMCACert||"",e.MapEnable=t.MapEnable||!1,e.MapCenter=t.MapCenter||"",e.MediaTransport=t.MediaTransport||"UDP",e.MediaTransportMode=t.MediaTransportMode||"passive",e.confirmAPIAuth=!1,e.confirmDevicePassword=!1,setTimeout(function(){e.DevicePassword=t.DevicePassword||"",e.bRawPwd=!1,e.remoteBasicData=JSON.stringify(e.getBasicCommitObject())},300)})},onUploadCertSuccess:function(e,t,s){this.bUploading=!1,this.HTTPSCertFile=e,this.$message({type:"success",message:"上传Cert证书成功！"})},onUploadCertProgress:function(e,t,s){this.bUploading=!0},onUploadCertError:function(e,t,s){this.bUploading=!1,e&&this.$message({type:"error",message:e+""})},onUploadKeySuccess:function(e,t,s){this.bUploading=!1,this.HTTPSKeyFile=e,this.$message({type:"success",message:"上传Key证书成功！"})},onUploadKeyProgress:function(e,t,s){this.bUploading=!0},onUploadKeyError:function(e,t,s){this.bUploading=!1,e&&this.$message({type:"error",message:e+""})},onUploadCACertSuccess:function(e,t,s){this.bUploading=!1,this.GMCACert=e,this.getGMCerts(),this.$message({type:"success",message:"上传CA证书成功！"})},onUploadCACertProgress:function(e,t,s){this.bUploading=!0},onUploadCACertError:function(e,t,s){this.bUploading=!1,e&&this.$message({type:"error",message:e+""})},onUploadLocalCertSuccess:function(e,t,s){this.bUploading=!1,this.getGMCerts(),this.$message({type:"success",message:"上传本地证书成功！"})},onUploadLocalCertProgress:function(e,t,s){this.bUploading=!0},onUploadLocalCertError:function(e,t,s){this.bUploading=!1,e&&this.$message({type:"error",message:e+""})},onUploadMapSuccess:function(e,t,s){this.bMapUploading=!1,e.center&&e.center.length>1&&(this.MapCenter=parseFloat(e.center[0].toFixed(5))+","+parseFloat(e.center[1].toFixed(5))),this.$message({type:"success",message:"上传地图包成功！"})},onUploadMapProgress:function(e,t,s){this.bMapUploading=!0},onUploadMapError:function(e,t,s){this.bMapUploading=!1,e&&this.$message({type:"error",message:e+""})},downloadCert:function(e){var t="/api/v1/gm/cert/download";e&&(t+="?fname="+e),window.open(t,"_blank")},removeCert:function(e,t){var s=this,a="确认删除证书?";t&&(a="确认删除"+t+"?"),this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1}).then(function(){var t="/api/v1/gm/cert/remove";e&&(t+="?fname="+e),v.default.post(t).then(function(){e==s.GMCACert&&(s.GMCACert=""),s.getGMCerts()})}).catch(function(){})},getGMCerts:function(){var e=this;this.bCertLoading=!0,v.default.get("/api/v1/gm/cert/list").then(function(t){e.GMCerts=t.CertList||[]}).always(function(){e.bCertLoading=!1})},formatCertDays:function(e,t,s){var a=(0,p.default)(e.StartAt,"YYYY-MM-DD HH:mm:ss"),r=(0,p.default)(e.EndAt,"YYYY-MM-DD HH:mm:ss");return a&&r&&a.year()>1&&r.year()>1?a.format("YYYY-MM-DD")+" ~ "+r.format("YYYY-MM-DD"):"-"},formatCommonName:function(e,t,s){var a=s||"-",r=a.split("_");return 2==r.length&&(a=r[0]||"-"),a},getSMSList:function(){var e=this;""==this.smsserial&&v.default.get("/api/v1/sms/list").then(function(t){e.smss=t,t.length>0&&(e.sms=t[0],e.smsserial=t[0].Serial),e.getSMSInfo(),""==e.smsserial?e.timer=setTimeout(function(){e.getSMSList()},1e3):e.smstip="流媒体服务尚未启动"})},getSMSInfo:function(){var e=this;""!=this.smsserial&&v.default.get("/api/v1/sms/getbaseconfig",{serial:this.smsserial}).then(function(t){e.smsbaseconfig=t,e.smsbaseconfig.RTSPPort=e.smsbaseconfig.RTSPPort||"",e.smsbaseconfig.RTMPPort=e.smsbaseconfig.RTMPPort||"",e.smsbaseconfig.CleanOverDays=e.smsbaseconfig.CleanOverDays||"",e.smsbaseconfig.PreSerial=e.smsserial,e.remoteSMSData=JSON.stringify(e.smsbaseconfig)})},smschange:function(){this.getSMSInfo()},onMediaTransportChange:function(e){"UDP"==e&&(this.MediaTransportMode="passive")}}),computed:o({},(0,d.mapState)(["logoText","logoMiniText","menus","serverInfo"]),{isBasicNoChange:function(){var e=JSON.stringify(this.getBasicCommitObject());return 0==this.remoteBasicData.localeCompare(e)},isSMSNoChange:function(){this.smsbaseconfig.PreSerial=this.smsserial;var e=JSON.stringify(this.smsbaseconfig);return 0==this.remoteSMSData.localeCompare(e)}})}},"8vxd":function(e,t,s){var a=s("rvuB");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("519a20f8",a,!0,{})},AeoH:function(e,t,s){var a=s("NNZ4");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("6df2f03c",a,!0,{})},ArYz:function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){function a(r,o){try{var i=t[r](o),l=i.value}catch(e){return void s(e)}if(!i.done)return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)});e(l)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var o=s("A9K1"),i=a(o),l=s("0iPh"),n=a(l);t.default={data:function(){return{debug:!1,form:this.defForm()}},components:{FormDlg:i.default},beforeDestroy:function(){(0,n.default)(this.$el).off("keydown",this.keyDown)},methods:{defForm:function(){return{common_name:"",country:"",province:"",locality:"",organization:"",organizational_unit:"",email:""}},onHide:function(){this.debug=!1,this.form=this.defForm(),(0,n.default)(this.$el).off("keydown",this.keyDown)},onShow:function(){this.errors.clear(),(0,n.default)(this.$el).on("keydown",this.keyDown)},keyDown:function(e){if(e.altKey&&e.shiftKey)switch(e.key){case"D":e.preventDefault(),this.toggleDebug()}},toggleDebug:function(){this.debug=!this.debug},onSubmit:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var s,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(s=t.sent){t.next=8;break}return a=e.errors.items[0],e.$message({type:"error",message:a.msg}),(0,n.default)("[name="+a.field+"]").focus(),t.abrupt("return");case 8:n.default.post("/api/v1/gm/req/create",e.form).then(function(){e.$refs.dlg.hide(),e.$emit("submit")});case 9:case"end":return t.stop()}},t,e)}))()},show:function(){this.errors.clear(),this.$refs.dlg.show()}}}},HF0Z:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-fluid no-padding"},[s("div",{class:["nav-tabs-custom","no-padding",{"col-lg-offset-2":!e.bShowMore,"col-lg-8":!e.bShowMore,"col-lg-offset-1":e.bShowMore,"col-lg-10":e.bShowMore}]},[s("ul",{staticClass:"nav nav-tabs"},[s("li",{staticClass:"active"},[s("a",{attrs:{href:"#base-config","data-toggle":"tab"}},[e._v(e._s(e.logoText)+" 信令服务配置")])]),e._v(" "),s("li",{on:{click:function(t){t.preventDefault(),e.getSMSList(t)}}},[s("a",{attrs:{href:"#sms-config","data-toggle":"tab"}},[e._v(e._s(e.logoText)+" 流媒体服务配置")])])]),e._v(" "),s("div",{staticClass:"tab-content"},[s("div",{staticClass:"tab-pane active",attrs:{id:"base-config"}},[s("form",{staticClass:"form-horizontal",attrs:{role:"form",autocomplete:"off","data-vv-scope":"cms"},on:{submit:function(t){t.preventDefault(),e.onSubmit(t)}}},[s("div",{class:[{"col-md-6":e.bShowMore,"col-md-12":!e.bShowMore}]},[s("div",{class:["form-group",{"has-error":e.errors.has("cms.Serial")}]},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},attrs:{for:"sip-serial"}},[e._v("SIP ID")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_dash",expression:"'required|alpha_dash'"},{name:"model",rawName:"v-model.trim",value:e.Serial,expression:"Serial",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"sip-serial",type:"text",name:"Serial","data-vv-as":"SIP ID"},domProps:{value:e.Serial},on:{input:function(t){t.target.composing||(e.Serial=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.Serial")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("cms.Realm")}]},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},attrs:{for:"sip-realm"}},[e._v("SIP 域")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:e.Realm,expression:"Realm",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"sip-realm",type:"text",name:"Realm","data-vv-as":"SIP 域"},domProps:{value:e.Realm},on:{input:function(t){t.target.composing||(e.Realm=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.Realm")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("cms.Host")}]},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},attrs:{for:"sip-host"}},[e._v("SIP Host")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:e.Host,expression:"Host",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"sip-host",name:"Host","data-vv-as":"SIP Host"},domProps:{value:e.Host},on:{input:function(t){t.target.composing||(e.Host=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.Host")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("cms.Port")}]},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},attrs:{for:"sip-port"}},[e._v("SIP 端口")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"},{name:"model",rawName:"v-model.trim",value:e.Port,expression:"Port",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"sip-port",name:"Port","data-vv-as":"SIP 端口"},domProps:{value:e.Port},on:{input:function(t){t.target.composing||(e.Port=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.Port")))])])]),e._v(" "),s("div",{class:["form-group","has-feedback",{"has-error":e.errors.has("cms.DevicePassword")}]},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},attrs:{for:"sip-dev-pwd"}},[e._v("设备统一接入密码")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[e.bRawPwd?s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.DevicePassword,expression:"DevicePassword",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"sip-dev-pwd",name:"DevicePassword","data-vv-as":"设备统一接入密码"},domProps:{value:e.DevicePassword},on:{input:function(t){t.target.composing||(e.DevicePassword=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}):s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.DevicePassword,expression:"DevicePassword",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"password",id:"sip-dev-pwd",name:"DevicePassword",autocomplete:"new-password","data-vv-as":"设备统一接入密码"},domProps:{value:e.DevicePassword},on:{input:function(t){t.target.composing||(e.DevicePassword=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),e.bRawPwd?s("span",{staticClass:"glyphicon glyphicon-eye-open form-control-feedback text-gray",on:{click:function(t){e.bRawPwd=!e.bRawPwd}}}):s("span",{staticClass:"glyphicon glyphicon-eye-close form-control-feedback text-gray",on:{click:function(t){e.bRawPwd=!e.bRawPwd}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.DevicePassword")))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.DevicePassword&&e.remoteBasicData,expression:"!DevicePassword && remoteBasicData"}],staticClass:"text-danger"},[s("i",{staticClass:"fa fa-exclamation-circle"}),e._v(" 缺少设备统一接入密码, 存在安全风险!\r\n                                ")])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("cms.PreferStreamFmt")}],attrs:{title:"配置直播流优先使用的播放格式"}},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},attrs:{for:"prefer-stream-fmt"}},[e._v("首选直播格式")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.PreferStreamFmt,expression:"PreferStreamFmt",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"prefer-stream-fmt",name:"PreferStreamFmt"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.PreferStreamFmt=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("自动选择")]),e._v(" "),s("option",{attrs:{value:"FLV"}},[e._v("FLV")]),e._v(" "),s("option",{attrs:{value:"WS_FLV"}},[e._v("WS_FLV")]),e._v(" "),s("option",{attrs:{value:"WEBRTC"}},[e._v("WEBRTC")]),e._v(" "),s("option",{attrs:{value:"HLS"}},[e._v("HLS")]),e._v(" "),s("option",{attrs:{value:"RTMP"}},[e._v("RTMP")])]),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.PreferStreamFmt")))])])]),e._v(" "),s("div",{class:{"form-group":!0,"has-error":e.errors.has("cms.HTTPSPort")},attrs:{title:"配置为0, 表示不开启HTTPS"}},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},attrs:{for:"base-https-port"}},[e._v("HTTPS 端口(可选)")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"},{name:"model",rawName:"v-model.trim.number",value:e.HTTPSPort,expression:"HTTPSPort",modifiers:{trim:!0,number:!0}}],staticClass:"form-control",attrs:{id:"base-https-port",type:"text",name:"HTTPSPort","data-vv-as":"HTTPS 端口",placeholder:"默认不开启HTTPS"},domProps:{value:e.HTTPSPort},on:{input:function(t){t.target.composing||(e.HTTPSPort=e._n(t.target.value.trim()))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.HTTPSPort")))])])]),e._v(" "),e.HTTPSPort?s("div",{class:{"form-group":!0,"has-error":e.errors.has("cms.HTTPSCertFile")},attrs:{title:"配置 Cert 证书路径，绝对路径"}},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},attrs:{for:"base-https-cert-file"}},[e._v("HTTPS Cert 证书路径")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.HTTPSCertFile,expression:"HTTPSCertFile",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"base-https-cert-file",type:"text",spellcheck:"false",autocomplete:"off",name:"HTTPSCertFile",placeholder:"配置cert证书绝对路径"},domProps:{value:e.HTTPSCertFile},on:{input:function(t){t.target.composing||(e.HTTPSCertFile=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("el-upload",{staticClass:"input-group-btn",attrs:{action:"/api/v1/ssl/cert/import",accept:".pem,.cer,.crt,.csr,.der","show-file-list":!1,"on-success":e.onUploadCertSuccess,"on-error":e.onUploadCertError,"on-progress":e.onUploadCertProgress}},[s("button",{staticClass:"btn btn-default",staticStyle:{"border-top-right-radius":"0","border-bottom-right-radius":"0","border-top-left-radius":"0","border-bottom-left-radius":"0","border-left":"0"},attrs:{type:"button",title:"上传Cert证书"}},[s("i",{staticClass:"fa fa-upload"})])])],1),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.HTTPSCertFile")))])])]):e._e(),e._v(" "),e.HTTPSPort?s("div",{class:{"form-group":!0,"has-error":e.errors.has("cms.HTTPSKeyFile")},attrs:{title:"配置 Key 证书路径，绝对路径"}},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},attrs:{for:"base-https-key-file"}},[e._v("HTTPS Key 证书路径")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.HTTPSKeyFile,expression:"HTTPSKeyFile",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"base-https-key-file",type:"text",spellcheck:"false",autocomplete:"off",name:"HTTPSKeyFile",placeholder:"配置key证书绝对路径"},domProps:{value:e.HTTPSKeyFile},on:{input:function(t){t.target.composing||(e.HTTPSKeyFile=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("el-upload",{staticClass:"input-group-btn",attrs:{action:"/api/v1/ssl/key/import",accept:".pem,.cer,.crt,.csr,.der,.key","show-file-list":!1,"on-success":e.onUploadKeySuccess,"on-error":e.onUploadKeyError,"on-progress":e.onUploadKeyProgress}},[s("button",{staticClass:"btn btn-default",staticStyle:{"border-top-right-radius":"0","border-bottom-right-radius":"0","border-top-left-radius":"0","border-bottom-left-radius":"0","border-left":"0"},attrs:{type:"button",title:"上传Key证书"}},[s("i",{staticClass:"fa fa-upload"})])])],1),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.HTTPSKeyFile")))])])]):e._e(),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore}},[e._v("接入控制(可选)")]),e._v(" "),s("div",{staticClass:"checkbox",class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("router-link",{attrs:{to:"/black/1",title:"设备接入黑名单维护"}},[s("i",{staticClass:"fa fa-calendar-times-o",attrs:{"aria-hidden":"true"}}),e._v(" 黑名单  \r\n                                ")]),e._v(" "),s("router-link",{attrs:{to:"/white/1",title:"设备接入白名单维护"}},[s("i",{staticClass:"fa fa-calendar-check-o",attrs:{"aria-hidden":"true"}}),e._v(" 白名单  \r\n                                ")]),e._v(" "),s("span",{staticClass:"help-block"})],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"标准版"!=e.serverInfo.VersionType,expression:"serverInfo.VersionType != '标准版'"}],staticClass:"form-group"},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore}},[e._v("35114 国密认证")]),e._v(" "),s("div",{staticClass:"checkbox",class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"GM"},model:{value:e.GM,callback:function(t){e.GM="string"==typeof t?t.trim():t},expression:"GM"}},[e._v("\r\n                                    启用国密  \r\n                                ")]),e._v(" "),e.GM?s("el-upload",{staticStyle:{display:"inline-block","margin-right":"7px"},attrs:{action:"/api/v1/gm/ca/import",accept:".pem,.cer,.crt,.csr,.der","show-file-list":!1,"on-success":e.onUploadCACertSuccess,"on-error":e.onUploadCACertError,"on-progress":e.onUploadCACertProgress}},[e.GMCACert?s("a",{attrs:{role:"button",title:"重新上传CA国密证书"}},[s("i",{staticClass:"fa fa-upload"}),e._v(" 重新上传CA证书\r\n                                    ")]):s("a",{attrs:{role:"button",title:"上传CA国密证书"}},[s("i",{staticClass:"fa fa-upload"}),e._v(" 上传CA证书\r\n                                    ")])]):e._e(),e._v(" "),e.GM?s("a",{attrs:{role:"button",title:"创建证书请求"},on:{click:function(t){e.$refs["gm-req-dlg"].show()}}},[s("i",{staticClass:"fa fa-certificate",attrs:{"aria-hidden":"true"}}),e._v(" 创建证书请求\r\n                                ")]):e._e(),e._v(" "),e.GM?s("span",[e._v("  ")]):e._e(),e._v(" "),e.GM?s("router-link",{attrs:{to:"/gm/req/1",target:"_blank"}},[s("i",{staticClass:"fa fa-edit"}),e._v(" 签发设备证书\r\n                                    "),s("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[s("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),e._v(" "),s("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})])]):e._e(),e._v(" "),s("span",{staticClass:"help-block"})],1)]),e._v(" "),e.GM&&e.GMCerts.length>0?s("div",{staticClass:"form-group"},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore},on:{click:e.getGMCerts}},[e._v("35114 国密证书")]),e._v(" "),s("div",{class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.bCertLoading,expression:"bCertLoading"}],attrs:{data:e.GMCerts,stripe:"","element-loading-text":"加载中..."}},[s("el-table-column",{attrs:{"min-width":"100",label:"证书功能",prop:"Description","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{"min-width":"200",label:"签发给",prop:"Subject",formatter:e.formatCommonName,"show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{"min-width":"200",label:"签发者",prop:"Issuer","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[4==t.row.Type?s("span",[s("a",{attrs:{role:"button",title:"创建自签名的本地国密证书"},on:{click:function(s){e.$refs["gm-cert-dlg"].show(t.row.Name)}}},[s("i",{staticClass:"fa fa-edit"}),e._v(" 自签名\r\n                                                ")]),e._v("\r\n                                                  \r\n                                                "),s("el-upload",{staticStyle:{display:"inline-block","margin-right":"7px"},attrs:{action:"/api/v1/gm/cert/import?req="+t.row.Name,accept:".pem,.cer,.crt,.csr,.der","show-file-list":!1,"on-success":e.onUploadLocalCertSuccess,"on-error":e.onUploadLocalCertError,"on-progress":e.onUploadLocalCertProgress}},[s("a",{attrs:{role:"button",title:"上传CA签名的本地国密证书"}},[s("i",{staticClass:"fa fa-upload"}),e._v(" CA签名\r\n                                                    ")])])],1):s("span",[e._v(e._s(e.formatCommonName(t.row,t.column,t.row.Issuer)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"200",label:"有效期",formatter:e.formatCertDays,"show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{"min-width":"280",label:"序列号",prop:"SN","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{"min-width":"160",label:"修改时间",prop:"ModAt","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{"min-width":"120",label:"操作",fixed:!e.isMobile()&&"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"btn-group"},[s("a",{staticClass:"btn btn-info btn-xs",attrs:{role:"button"},on:{click:function(s){s.preventDefault(),e.downloadCert(t.row.Name)}}},[s("i",{staticClass:"fa fa-download"}),e._v(" 下载")]),e._v(" "),s("a",{staticClass:"btn btn-danger btn-xs",attrs:{role:"button"},on:{click:function(s){s.preventDefault(),e.removeCert(t.row.Name,t.row.Description)}}},[s("i",{staticClass:"fa fa-remove"}),e._v(" 删除")])])]}}])})],1)],1)]):e._e(),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"control-label",class:{"col-sm-3":e.GM&&!e.bShowMore,"col-sm-4":!e.GM||e.bShowMore}},[e._v("其他配置")]),e._v(" "),s("div",{staticClass:"checkbox",class:{"col-sm-8":e.GM&&!e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{title:"开启后接口调用会校验登录",size:"small",name:"APIAuth"},model:{value:e.APIAuth,callback:function(t){e.APIAuth="string"==typeof t?t.trim():t},expression:"APIAuth"}},[e._v("\r\n                                    HTTP 接口鉴权  \r\n                                ")]),e._v(" "),s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{title:"开启后流地址访问会校验登录",size:"small",name:"LiveStreamAuth"},model:{value:e.LiveStreamAuth,callback:function(t){e.LiveStreamAuth="string"==typeof t?t.trim():t},expression:"LiveStreamAuth"}},[e._v("\r\n                                    流地址鉴权  \r\n                                ")]),e._v(" "),s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{title:"开启后不需要事先通过接口拉流, 直播地址直接可用",size:"small",name:"AllowStreamStartByURL"},model:{value:e.AllowStreamStartByURL,callback:function(t){e.AllowStreamStartByURL="string"==typeof t?t.trim():t},expression:"AllowStreamStartByURL"}},[e._v("\r\n                                    允许直播地址拉流  \r\n                                ")]),e._v(" "),s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"SIPLog"},model:{value:e.SIPLog,callback:function(t){e.SIPLog="string"==typeof t?t.trim():t},expression:"SIPLog"}},[e._v("信令日志  ")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:!1===e.remoteAPIAuth&&!e.APIAuth,expression:"remoteAPIAuth === false && !APIAuth"}],staticClass:"text-danger"},[s("br"),e._v(" "),s("i",{staticClass:"fa fa-exclamation-circle"}),e._v(" 接口鉴权关闭状态, 表示不需要登录即可访问系统, 可能导致不可预测的安全风险!\r\n                                    "),s("br")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.remoteAPIAuth&&!e.APIAuth,expression:"remoteAPIAuth && !APIAuth"}],staticClass:"text-danger"},[s("br"),e._v(" "),s("i",{staticClass:"fa fa-exclamation-circle"}),e._v(" 关闭接口鉴权, 表示不需要登录即可访问系统, 可能导致不可预测的安全风险, 谨慎操作!\r\n                                    "),s("br")]),e._v(" "),s("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.remoteAPIAuth&&!e.APIAuth,expression:"remoteAPIAuth && !APIAuth"}],staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"confirmAPIAuth"},model:{value:e.confirmAPIAuth,callback:function(t){e.confirmAPIAuth="string"==typeof t?t.trim():t},expression:"confirmAPIAuth"}},[s("span",{staticClass:"text-danger"},[e._v("我已知悉关闭接口鉴权带来的安全风险")])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.DevicePassword&&e.remoteBasicData&&!e.isBasicNoChange,expression:"!DevicePassword && remoteBasicData && !isBasicNoChange"}]},[s("br"),e._v(" "),s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"confirmDevicePassword"},model:{value:e.confirmDevicePassword,callback:function(t){e.confirmDevicePassword="string"==typeof t?t.trim():t},expression:"confirmDevicePassword"}},[s("span",{staticClass:"text-danger"},[e._v("我已知悉缺少设备统一接入密码带来的安全风险")])])],1),e._v(" "),s("span",{staticClass:"help-block"})],1)]),e._v(" "),e.bShowMore?s("br"):e._e(),e._v(" "),s("div",{staticClass:"form-group",staticStyle:{"font-weight":"bold","padding-top":"15px","padding-bottom":"10px"}},[s("div",{class:{"col-sm-offset-3":e.GM&&!e.bShowMore,"col-sm-8":e.GM&&!e.bShowMore,"col-sm-offset-4":!e.GM||e.bShowMore,"col-sm-7":!e.GM||e.bShowMore}},[s("a",{staticClass:"form-control-static text-primary",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.bShowMore=!e.bShowMore}}},[e._v("\r\n                                    "+e._s(e.bShowMore?"<<  关闭更多配置":"显示更多配置  >>")+"\r\n                                ")])])])]),e._v(" "),e.bShowMore?s("div",{staticClass:"col-md-6"},[s("div",{class:["form-group",{"has-error":e.errors.has("cms.TimeServer")}]},[s("label",{staticClass:"col-sm-4 control-label",attrs:{for:"sip-time-server"}},[e._v("校时源(可选)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"validate",rawName:"v-validate"},{name:"model",rawName:"v-model.trim",value:e.TimeServer,expression:"TimeServer",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"sip-time-server",name:"TimeServer","data-vv-as":"校时源",placeholder:"上级国标编号/NTP"},domProps:{value:e.TimeServer},on:{input:function(t){t.target.composing||(e.TimeServer=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.TimeServer")))])])]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label",attrs:{for:"black-ip-list"}},[e._v("黑名单 IP(可选)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.BlackIPList,expression:"BlackIPList",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"black-ip-list",name:"BlackIPList","data-vv-as":"黑名单 IP",placeholder:"选填"},domProps:{value:e.BlackIPList},on:{input:function(t){t.target.composing||(e.BlackIPList=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"})])]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label",attrs:{for:"black-ua-list"}},[e._v("黑名单 UA(可选)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.BlackUAList,expression:"BlackUAList",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"black-ua-list",name:"BlackUAList","data-vv-as":"黑名单 UA",placeholder:"选填"},domProps:{value:e.BlackUAList},on:{input:function(t){t.target.composing||(e.BlackUAList=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"})])]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("全局过滤通道类型")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("el-select",{staticStyle:{width:"100%"},attrs:{size:"medium",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选填, 需要丢弃的通道类型"},model:{value:e.dropChannelTypes,callback:function(t){e.dropChannelTypes="string"==typeof t?t.trim():t},expression:"dropChannelTypes"}},e._l(e.innerChannelTypes,function(e,t){return s("el-option",{key:t,attrs:{label:t+" - "+e,value:t}})}))],1)]),e._v(" "),s("div",{staticClass:"form-group",attrs:{title:"配置新接入设备的默认流传输模式"}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("默认流传输模式")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("el-radio-group",{attrs:{size:"mini"},on:{change:e.onMediaTransportChange},model:{value:e.MediaTransport,callback:function(t){e.MediaTransport="string"==typeof t?t.trim():t},expression:"MediaTransport"}},[s("el-radio-button",{attrs:{label:"TCP"}}),e._v(" "),s("el-radio-button",{attrs:{label:"UDP"}})],1),e._v("\r\n                                  \r\n                                "),s("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:"TCP"==e.MediaTransport,expression:"MediaTransport == 'TCP'"}],attrs:{size:"mini"},model:{value:e.MediaTransportMode,callback:function(t){e.MediaTransportMode="string"==typeof t?t.trim():t},expression:"MediaTransportMode"}},[s("el-radio-button",{attrs:{label:"passive"}},[e._v("被动")]),e._v(" "),s("el-radio-button",{attrs:{label:"active"}},[e._v("主动")])],1)],1)]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("全局订阅项目")]),e._v(" "),s("div",{staticClass:"col-sm-7 checkbox"},[s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"global_catalog_subscribe"},model:{value:e.global_catalog_subscribe,callback:function(t){e.global_catalog_subscribe="string"==typeof t?t.trim():t},expression:"global_catalog_subscribe"}},[e._v("\r\n                                    目录  \r\n                                ")]),e._v(" "),s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"global_alarm_subscribe"},model:{value:e.global_alarm_subscribe,callback:function(t){e.global_alarm_subscribe="string"==typeof t?t.trim():t},expression:"global_alarm_subscribe"}},[e._v("\r\n                                    报警  \r\n                                ")]),e._v(" "),s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"global_position_subscribe"},model:{value:e.global_position_subscribe,callback:function(t){e.global_position_subscribe="string"==typeof t?t.trim():t},expression:"global_position_subscribe"}},[e._v("\r\n                                    位置  \r\n                                ")]),e._v(" "),s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"global_ptz_subscribe"},model:{value:e.global_ptz_subscribe,callback:function(t){e.global_ptz_subscribe="string"==typeof t?t.trim():t},expression:"global_ptz_subscribe"}},[e._v("\r\n                                    PTZ(2022)\r\n                                ")]),e._v(" "),s("span",{staticClass:"help-block"})],1)]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("全局通道开启音频")]),e._v(" "),s("div",{staticClass:"col-sm-7 checkbox"},[s("el-switch",{model:{value:e.GlobalChannelAudio,callback:function(t){e.GlobalChannelAudio="string"==typeof t?t.trim():t},expression:"GlobalChannelAudio"}}),e._v(" "),s("span",{staticClass:"help-block"})],1)]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("全局通道开启分享")]),e._v(" "),s("div",{staticClass:"col-sm-7 checkbox"},[s("el-switch",{model:{value:e.GlobalChannelShared,callback:function(t){e.GlobalChannelShared="string"==typeof t?t.trim():t},expression:"GlobalChannelShared"}}),e._v(" "),s("span",{staticClass:"help-block"})],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"标准版"!=e.serverInfo.VersionType,expression:"serverInfo.VersionType != '标准版'"}],staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("电子地图")]),e._v(" "),s("div",{staticClass:"col-sm-7 checkbox"},[s("el-switch",{model:{value:e.MapEnable,callback:function(t){e.MapEnable="string"==typeof t?t.trim():t},expression:"MapEnable"}}),e._v(" "),s("span",{staticClass:"help-block"})],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"标准版"!=e.serverInfo.VersionType&&e.MapEnable,expression:"serverInfo.VersionType != '标准版' && MapEnable"}],class:["form-group",{"has-error":e.errors.has("cms.MapCenter")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("地图中心(经,纬度)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.MapCenter,expression:"MapCenter",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"MapCenter","data-vv-as":"地图中心",placeholder:"经度,纬度"},domProps:{value:e.MapCenter},on:{input:function(t){t.target.composing||(e.MapCenter=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("cms.MapCenter")))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"标准版"!=e.serverInfo.VersionType&&e.MapEnable,expression:"serverInfo.VersionType != '标准版' && MapEnable"}],staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("地图包上传(zip)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.bMapUploading,expression:"bMapUploading",modifiers:{fullscreen:!0,lock:!0}}],ref:"map-uploader",attrs:{drag:"",action:"/api/v1/map/import",accept:".zip","show-file-list":!1,"on-success":e.onUploadMapSuccess,"on-error":e.onUploadMapError,"on-progress":e.onUploadMapProgress,"element-loading-text":"地图包上传中...",id:"map-uploader"}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"el-upload__text"},[e._v("将地图包拖到此处，或 "),s("em",[e._v("点击上传")]),s("br")])])],1)])]):e._e(),e._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("div",{class:[{"col-sm-offset-5":e.bShowMore,"col-sm-offset-4":!e.GM&&!e.bShowMore,"col-sm-offset-3":e.GM&&!e.bShowMore,"col-sm-7":!0}]},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.isBasicNoChange||e.errors.any("cms")||e.remoteAPIAuth&&!e.APIAuth&&!e.confirmAPIAuth||!e.DevicePassword&&!e.confirmDevicePassword||e.bCommitting||e.bUploading}},[e._v("保存")])])])]),e._v(" "),s("div",{staticClass:"clearfix"})])]),e._v(" "),s("div",{staticClass:"tab-pane",attrs:{id:"sms-config"}},[s("form",{staticClass:"form-horizontal",attrs:{role:"form",autocomplete:"off","data-vv-scope":"sms"},on:{submit:function(t){t.preventDefault(),e.onSubmitSMS(t)}}},[e.smss.length<=0?s("div",{staticClass:"form-group"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"alert text-center no-margin"},[e._v("SMS "+e._s(e.smstip))])])]):e._e(),e._v(" "),s("div",{class:[{"col-md-6":e.bShowMore,"col-md-12":!e.bShowMore}]},[e.smss.length>0?s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("SMS 服务")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.smsserial,expression:"smsserial",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.smsserial=t.target.multiple?s:s[0]},e.smschange]}},e._l(e.smss,function(t,a){return s("option",{key:a,domProps:{value:t.Serial}},[e._v(e._s(t.Serial))])}))])]):e._e(),e._v(" "),void 0!=e.smsbaseconfig.Host&&e.smss.length>0?s("div",[s("div",{class:["form-group",{"has-error":e.errors.has("sms.smsHost")}],attrs:{title:"内部通信收流. 启用外网IP收流后, 此处配置信令服务可访问的局域网IP如：127.0.0.1"}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("本地|内网 IP")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:e.smsbaseconfig.Host,expression:"smsbaseconfig.Host",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"内部通信收流. 启用外网IP收流后, 此处配置信令服务可访问的局域网IP如：127.0.0.1",name:"smsHost","data-vv-as":"本地|内网 IP"},domProps:{value:e.smsbaseconfig.Host},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"Host",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.smsHost")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("sms.WanIP")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("外网 IP(可选)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.smsbaseconfig.WanIP,expression:"smsbaseconfig.WanIP",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"WanIP","data-vv-as":"外网 IP",placeholder:"选填"},domProps:{value:e.smsbaseconfig.WanIP},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"WanIP",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.WanIP")))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"标准版"!=e.serverInfo.VersionType,expression:"serverInfo.VersionType != '标准版'"}],class:["form-group",{"has-error":e.errors.has("sms.RecordDir")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("云录像目录")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.smsbaseconfig.RecordDir,expression:"smsbaseconfig.RecordDir",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"RecordDir","data-vv-as":"云录像目录"},domProps:{value:e.smsbaseconfig.RecordDir},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"RecordDir",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.RecordDir")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("sms.RTSPPort")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("RTSP 端口(可选)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"},{name:"model",rawName:"v-model.trim.number",value:e.smsbaseconfig.RTSPPort,expression:"smsbaseconfig.RTSPPort",modifiers:{trim:!0,number:!0}}],staticClass:"form-control",attrs:{type:"text",name:"RTSPPort","data-vv-as":"RTSP 端口",placeholder:"选填"},domProps:{value:e.smsbaseconfig.RTSPPort},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"RTSPPort",e._n(t.target.value.trim()))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.RTSPPort")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("sms.RTMPPort")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("RTMP 端口")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"},{name:"model",rawName:"v-model.trim.number",value:e.smsbaseconfig.RTMPPort,expression:"smsbaseconfig.RTMPPort",modifiers:{trim:!0,number:!0}}],staticClass:"form-control",attrs:{type:"text",name:"RTMPPort","data-vv-as":"RTMP 端口"},domProps:{value:e.smsbaseconfig.RTMPPort},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"RTMPPort",e._n(t.target.value.trim()))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.RTMPPort")))])])]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("其他配置")]),e._v(" "),s("div",{staticClass:"col-sm-7 checkbox"},[s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{title:"加快启播速度,相应也会增大一点延时",size:"small",name:"GOPCache"},model:{value:e.smsbaseconfig.GOPCache,callback:function(t){e.$set(e.smsbaseconfig,"GOPCache","string"==typeof t?t.trim():t)},expression:"smsbaseconfig.GOPCache"}},[e._v("直播秒开")]),e._v(" "),e.bShowMore?s("br"):e._e(),e.bShowMore?s("br"):e._e(),e.bShowMore?e._e():s("span",[e._v("    ")]),e._v(" "),s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"SIPLog"},model:{value:e.smsbaseconfig.SIPLog,callback:function(t){e.$set(e.smsbaseconfig,"SIPLog","string"==typeof t?t.trim():t)},expression:"smsbaseconfig.SIPLog"}},[e._v("信令日志")]),e._v(" "),e.bShowMore?s("br"):e._e(),e.bShowMore?s("br"):e._e(),e.bShowMore?e._e():s("span",[e._v("    ")]),e._v(" "),s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"UseWanIPRecvStream"},model:{value:e.smsbaseconfig.UseWanIPRecvStream,callback:function(t){e.$set(e.smsbaseconfig,"UseWanIPRecvStream","string"==typeof t?t.trim():t)},expression:"smsbaseconfig.UseWanIPRecvStream"}},[e._v("外网 IP 收流")]),e._v(" "),e.bShowMore?s("br"):e._e(),e.bShowMore?s("br"):e._e(),e.bShowMore?e._e():s("span",[e._v("    ")]),e._v(" "),s("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.smsbaseconfig.OutHevc,expression:"smsbaseconfig.OutHevc"}],staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{title:"直接输出H265_FLV，不做转码，防止服务器性能过载",size:"small",name:"OutHevc"},model:{value:e.smsbaseconfig.OutHevc,callback:function(t){e.$set(e.smsbaseconfig,"OutHevc","string"==typeof t?t.trim():t)},expression:"smsbaseconfig.OutHevc"}},[e._v("H265_FLV")])],1)]),e._v(" "),e.bShowMore?s("br"):e._e(),e._v(" "),s("div",{staticClass:"form-group",staticStyle:{"font-weight":"bold","padding-top":"15px","padding-bottom":"10px"}},[s("div",{staticClass:"col-sm-offset-4 col-sm-7"},[s("a",{staticClass:"form-control-static text-primary",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.bShowMore=!e.bShowMore}}},[e._v("\r\n                                        "+e._s(e.bShowMore?"<<  关闭更多配置":"显示更多配置  >>")+"\r\n                                    ")])])])]):e._e()]),e._v(" "),e.bShowMore&&void 0!=e.smsbaseconfig.Host&&e.smss.length>0?s("div",{staticClass:"col-md-6"},[s("div",{class:["form-group",{"has-error":e.errors.has("sms.smsSerial")}],attrs:{title:"内部通信使用"}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("SMS ID")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_dash",expression:"'required|alpha_dash'"},{name:"model",rawName:"v-model.trim",value:e.smsbaseconfig.Serial,expression:"smsbaseconfig.Serial",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"smsSerial","data-vv-as":"SMS ID"},domProps:{value:e.smsbaseconfig.Serial},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"Serial",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.smsSerial")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("sms.smsRealm")}],attrs:{title:"内部通信使用"}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("SMS 域")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:e.smsbaseconfig.Realm,expression:"smsbaseconfig.Realm",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"smsRealm","data-vv-as":"SMS 域"},domProps:{value:e.smsbaseconfig.Realm},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"Realm",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.smsRealm")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("sms.smsPort")}],attrs:{title:"内部通信使用"}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("SMS 端口")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"},{name:"model",rawName:"v-model.trim.number",value:e.smsbaseconfig.Port,expression:"smsbaseconfig.Port",modifiers:{trim:!0,number:!0}}],staticClass:"form-control",attrs:{type:"text",name:"smsPort","data-vv-as":"SMS 端口"},domProps:{value:e.smsbaseconfig.Port},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"Port",e._n(t.target.value.trim()))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.smsPort")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("sms.GroupID")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("分组 ID(可选)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.smsbaseconfig.GroupID,expression:"smsbaseconfig.GroupID",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"GroupID","data-vv-as":"分组 ID",placeholder:"选填"},domProps:{value:e.smsbaseconfig.GroupID},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"GroupID",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.GroupID")))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"标准版"!=e.serverInfo.VersionType,expression:"serverInfo.VersionType != '标准版'"}],class:["form-group",{"has-error":e.errors.has("sms.CleanOverDays")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("录像保留(天数)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:e.smsbaseconfig.CleanOverDays,expression:"smsbaseconfig.CleanOverDays",modifiers:{trim:!0,number:!0}}],staticClass:"form-control",attrs:{type:"number",title:"默认不配置会永久保存，直到触发下面的清理阀值",name:"CleanOverDays","data-vv-as":"录像保留(天数)",placeholder:"选填"},domProps:{value:e.smsbaseconfig.CleanOverDays},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"CleanOverDays",e._n(t.target.value.trim()))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.CleanOverDays")))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"标准版"!=e.serverInfo.VersionType,expression:"serverInfo.VersionType != '标准版'"}],class:["form-group",{"has-error":e.errors.has("sms.CleanFreespacePercent")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("存储清理阀值(%)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:e.smsbaseconfig.CleanFreespacePercent,expression:"smsbaseconfig.CleanFreespacePercent",modifiers:{trim:!0,number:!0}}],staticClass:"form-control",attrs:{type:"number",name:"CleanFreespacePercent","data-vv-as":"存储清理阀值(%)",placeholder:"选填"},domProps:{value:e.smsbaseconfig.CleanFreespacePercent},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"CleanFreespacePercent",e._n(t.target.value.trim()))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.CleanFreespacePercent")))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"标准版"!=e.serverInfo.VersionType,expression:"serverInfo.VersionType != '标准版'"}],class:["form-group",{"has-error":e.errors.has("sms.CleanFreespaceSize")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("存储清理阀值(MB)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:e.smsbaseconfig.CleanFreespaceSize,expression:"smsbaseconfig.CleanFreespaceSize",modifiers:{trim:!0,number:!0}}],staticClass:"form-control",attrs:{type:"number",name:"CleanFreespaceSize","data-vv-as":"存储清理阀值(MB)",placeholder:"选填"},domProps:{value:e.smsbaseconfig.CleanFreespaceSize},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"CleanFreespaceSize",e._n(t.target.value.trim()))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.CleanFreespaceSize")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("sms.TCPPortRange")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("收流端口区间(TCP)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.smsbaseconfig.TCPPortRange,expression:"smsbaseconfig.TCPPortRange",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"TCPPortRange","data-vv-as":"收流TCP端口区间",placeholder:"选填"},domProps:{value:e.smsbaseconfig.TCPPortRange},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"TCPPortRange",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.TCPPortRange")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("sms.UDPPortRange")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("收流端口区间(UDP)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.smsbaseconfig.UDPPortRange,expression:"smsbaseconfig.UDPPortRange",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"UDPPortRange","data-vv-as":"收流UDP端口区间",placeholder:"选填"},domProps:{value:e.smsbaseconfig.UDPPortRange},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"UDPPortRange",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.UDPPortRange")))])])]),e._v(" "),s("div",{class:["form-group",{"has-error":e.errors.has("sms.RTCPortRange")}]},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("WebRTC端口区间(UDP)")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.smsbaseconfig.RTCPortRange,expression:"smsbaseconfig.RTCPortRange",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"RTCPortRange","data-vv-as":"WebRTC播放端口区间(UDP)",placeholder:"选填"},domProps:{value:e.smsbaseconfig.RTCPortRange},on:{input:function(t){t.target.composing||e.$set(e.smsbaseconfig,"RTCPortRange",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"help-block"},[e._v(e._s(e.errors.first("sms.RTCPortRange")))])])])]):e._e(),e._v(" "),e.smss.length>0?s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("div",{class:[{"col-sm-offset-5":e.bShowMore,"col-sm-offset-4":!e.bShowMore,"col-sm-7":!0}]},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.isSMSNoChange||e.errors.any("sms")||e.bCommitting||e.bUploading}},[e._v("保存")])])])]):e._e(),e._v(" "),s("div",{staticClass:"clearfix"})])])])]),e._v(" "),s("GmReqDlg",{ref:"gm-req-dlg",on:{submit:e.getGMCerts}}),e._v(" "),s("GmCertDlg",{ref:"gm-cert-dlg",on:{submit:e.getGMCerts}})],1)},r=[],o={render:a,staticRenderFns:r};t.a=o},NNZ4:function(e,t,s){t=e.exports=s("FZ+f")(!1),t.push([e.i,"#map-uploader .el-upload{width:100%}#map-uploader .el-upload .el-upload-dragger{width:100%;height:auto}#map-uploader .el-upload .el-upload-dragger .el-icon-upload{margin:10px}#map-uploader .el-upload .el-upload-dragger .el-upload__text{margin-bottom:10px}",""])},"Ng+T":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("FormDlg",{ref:"dlg",attrs:{title:"创建自签名国密证书",disabled:e.errors.any()},on:{hide:e.onHide,show:e.onShow,submit:e.onSubmit}},[s("div",{class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("valid_days")}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("有效期(天)\n            "),s("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.valid_days,expression:"form.valid_days",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:1",expression:"'required|numeric|min_value:1'"}],staticClass:"form-control",attrs:{type:"text",name:"valid_days","data-vv-as":"有效期"},domProps:{value:e.form.valid_days},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.preventDefault(),e.onSubmit(t)},input:function(t){t.target.composing||e.$set(e.form,"valid_days",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("ca")}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("其它配置")]),e._v(" "),s("div",{staticClass:"col-sm-7 checkbox"},[s("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"ca"},model:{value:e.form.ca,callback:function(t){e.$set(e.form,"ca","string"==typeof t?t.trim():t)},expression:"form.ca"}},[e._v("\n                CA  \n            ")])],1)])])},r=[],o={render:a,staticRenderFns:r};t.a=o},"gbb/":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("vPDE"),r=s.n(a);for(var o in a)["default","default"].indexOf(o)<0&&function(e){s.d(t,e,function(){return a[e]})}(o);var i=s("Ng+T"),l=s("VU/8"),n=l(r.a,i.a,!1,null,null,null);t.default=n.exports},nH97:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("FormDlg",{ref:"dlg",attrs:{title:"创建国密证书请求",disabled:e.errors.any()},on:{hide:e.onHide,show:e.onShow,submit:e.onSubmit}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.debug,expression:"debug"}],class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("common_name")}},[s("label",{staticClass:"col-sm-4 control-label",attrs:{title:"CommonName"}},[e._v("设备标识\n            ")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.common_name,expression:"form.common_name",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],ref:"gm-common-name",staticClass:"form-control",attrs:{type:"text",name:"common_name",placeholder:"CommonName","data-vv-as":"设备标识"},domProps:{value:e.form.common_name},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$refs["gm-req-country"].focus()},input:function(t){t.target.composing||e.$set(e.form,"common_name",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("country")}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("国家\n            "),s("span",{staticClass:"text-red"},[e._v("*")])]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.country,expression:"form.country",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required|regex:^[A-Z]{2}$",expression:"'required|regex:^[A-Z]{2}$'"}],ref:"gm-req-country",staticClass:"form-control",attrs:{type:"text",name:"country",placeholder:"两字符国家代码, 如 CN","data-vv-as":"国家"},domProps:{value:e.form.country},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$refs["gm-req-province"].focus()},input:function(t){t.target.composing||e.$set(e.form,"country",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("province")}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("省/州\n            ")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.province,expression:"form.province",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],ref:"gm-req-province",staticClass:"form-control",attrs:{type:"text",name:"province","data-vv-as":"省/州"},domProps:{value:e.form.province},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$refs["gm-req-locality"].focus()},input:function(t){t.target.composing||e.$set(e.form,"province",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("locality")}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("地区\n            ")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.locality,expression:"form.locality",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],ref:"gm-req-locality",staticClass:"form-control",attrs:{type:"text",name:"locality","data-vv-as":"地区"},domProps:{value:e.form.locality},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$refs["gm-req-organization"].focus()},input:function(t){t.target.composing||e.$set(e.form,"locality",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("organization")}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("组织\n            ")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.organization,expression:"form.organization",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],ref:"gm-req-organization",staticClass:"form-control",attrs:{type:"text",name:"organization","data-vv-as":"组织"},domProps:{value:e.form.organization},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$refs["gm-req-organizational-unit"].focus()},input:function(t){t.target.composing||e.$set(e.form,"organization",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("organizational_unit")}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("单位\n            ")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.organizational_unit,expression:"form.organizational_unit",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],ref:"gm-req-organizational-unit",staticClass:"form-control",attrs:{type:"text",name:"organizational_unit","data-vv-as":"单位"},domProps:{value:e.form.organizational_unit},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.$refs["gm-req-email"].focus()},input:function(t){t.target.composing||e.$set(e.form,"organizational_unit",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{class:{"form-group":!0,"has-feedback":!0,"has-error":e.errors.has("email")}},[s("label",{staticClass:"col-sm-4 control-label"},[e._v("邮件\n            ")]),e._v(" "),s("div",{staticClass:"col-sm-7"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.email,expression:"form.email",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"email",expression:"'email'"}],ref:"gm-req-email",staticClass:"form-control",attrs:{type:"text",name:"email","data-vv-as":"邮件"},domProps:{value:e.form.email},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit(t)},input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])])])},r=[],o={render:a,staticRenderFns:r};t.a=o},"o9Q+":function(e,t,s){"use strict";function a(e){s("8vxd"),s("AeoH")}Object.defineProperty(t,"__esModule",{value:!0});var r=s("/ld9"),o=s.n(r);for(var i in r)["default","default"].indexOf(i)<0&&function(e){s.d(t,e,function(){return r[e]})}(i);var l=s("HF0Z"),n=s("VU/8"),c=a,m=n(o.a,l.a,!1,c,"data-v-520f369c",null);t.default=m.exports},rvuB:function(e,t,s){t=e.exports=s("FZ+f")(!1),t.push([e.i,".form-group .form-control-feedback.glyphicon-eye-close[data-v-520f369c],.form-group .form-control-feedback.glyphicon-eye-open[data-v-520f369c]{pointer-events:auto;cursor:pointer}.fa.cfg-black-list[data-v-520f369c],.fa.cfg-cert-export[data-v-520f369c],.fa.cfg-white-list[data-v-520f369c]{font-size:14px;line-height:24px;display:inline-block;color:#567}",""])},vGyV:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("ArYz"),r=s.n(a);for(var o in a)["default","default"].indexOf(o)<0&&function(e){s.d(t,e,function(){return a[e]})}(o);var i=s("nH97"),l=s("VU/8"),n=l(r.a,i.a,!1,null,null,null);t.default=n.exports},vPDE:function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){function a(r,o){try{var i=t[r](o),l=i.value}catch(e){return void s(e)}if(!i.done)return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)});e(l)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var o=s("A9K1"),i=a(o),l=s("0iPh"),n=a(l);t.default={props:{action:{default:"/api/v1/gm/cert/create"}},data:function(){return{form:this.defForm()}},components:{FormDlg:i.default},methods:{defForm:function(){return{valid_days:3650,req:"",ca:!0}},onHide:function(){this.form=this.defForm()},onShow:function(){this.errors.clear()},onSubmit:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var s,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(s=t.sent){t.next=8;break}return a=e.errors.items[0],e.$message({type:"error",message:a.msg}),(0,n.default)("[name="+a.field+"]").focus(),t.abrupt("return");case 8:n.default.post(e.action,e.form).then(function(){e.$refs.dlg.hide(),e.$emit("submit")});case 9:case"end":return t.stop()}},t,e)}))()},show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.errors.clear(),this.form.req=e||"",this.$refs.dlg.show()}}}}});