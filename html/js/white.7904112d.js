webpackJsonp([7],{"5gxX":function(t,e,r){"use strict";function o(t){r("LbQQ")}Object.defineProperty(e,"__esModule",{value:!0});var a=r("qb8i"),s=r.n(a);for(var i in a)["default","default"].indexOf(i)<0&&function(t){r.d(e,t,function(){return a[t]})}(i);var n=r("lGU5"),l=r("VU/8"),c=o,u=l(s.a,n.a,!1,c,null,null);e.default=u.exports},"6V0a":function(t,e,r){e=t.exports=r("FZ+f")(!1),e.push([t.i,".form-group .form-control-feedback.glyphicon-eye-close[data-v-18ad064e],.form-group .form-control-feedback.glyphicon-eye-open[data-v-18ad064e]{pointer-events:auto;cursor:pointer}",""])},"9d5M":function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("FormDlg",{directives:[{name:"loading",rawName:"v-loading",value:t.bCertUploading,expression:"bCertUploading"}],ref:"dlg",attrs:{title:"编辑白名单",disabled:t.errors.any()||t.bCertUploading},on:{hide:t.onHide,show:t.onShow,submit:t.onSubmit}},[r("div",{class:{"form-group":!0,"has-error":t.errors.has("serial")}},[r("label",{staticClass:"col-sm-4 control-label"},[t._v("设备国标编号\r\n            "),r("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),r("div",{staticClass:"col-sm-7"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.serial,expression:"form.serial",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",readonly:"edit"==t.form.oper,name:"serial","data-vv-as":"设备编号"},domProps:{value:t.form.serial},on:{input:function(e){e.target.composing||t.$set(t.form,"serial",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showDirection,expression:"showDirection"}],class:{"form-group":!0,"has-error":t.errors.has("direction")}},[r("label",{staticClass:"col-sm-4 control-label"},[t._v("认证方式\r\n        ")]),t._v(" "),r("div",{staticClass:"col-sm-7"},[r("select",{directives:[{name:"model",rawName:"v-model.trim.number",value:t.form.direction,expression:"form.direction",modifiers:{trim:!0,number:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{id:"input-direction",name:"direction","data-vv-as":"认证方式"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var r="_value"in e?e._value:e.value;return t._n(r)});t.$set(t.form,"direction",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"0"}},[t._v("28181 摘要")]),t._v(" "),r("option",{attrs:{value:"1"}},[t._v("35114 单向")]),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("35114 双向")])])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.form.direction,expression:"!form.direction"}],class:{"form-group":!0,"has-feedback":!1,"has-error":t.errors.has("password")}},[r("label",{staticClass:"col-sm-4 control-label"},[t._v("接入密码\r\n        ")]),t._v(" "),r("div",{staticClass:"col-sm-7"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.password,expression:"form.password",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"password",placeholder:"为空时免密接入","data-vv-as":"接入密码"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.form.cert||t.form.direction,expression:"form.cert || form.direction"}],class:{"form-group":!0,"has-error":t.errors.has("cert")}},[r("label",{staticClass:"col-sm-4 control-label"},[t._v("设备证书\r\n        ")]),t._v(" "),r("div",{staticClass:"col-sm-7 checkbox"},[t.form.cert?r("a",{attrs:{href:"/api/v1/gm/cert/download?serial="+t.form.serial,target:"_blank",title:"下载设备国密证书"}},[r("i",{staticClass:"fa fa-download"}),t._v(" 下载证书  \r\n            ")]):t._e(),t._v(" "),t.form.cert?r("a",{attrs:{role:"button",title:"删除设备国密证书"},on:{click:t.removeCert}},[r("i",{staticClass:"fa fa-remove"}),t._v(" 删除证书\r\n            ")]):t._e(),t._v(" "),t.form.cert?t._e():r("el-upload",{staticStyle:{display:"inline-block","margin-right":"7px"},attrs:{action:"/api/v1/gm/cert/import?serial="+t.form.serial,accept:".pem,.cer,.crt,.csr,.der","show-file-list":!1,"on-success":t.onUploadCertSuccess,"on-error":t.onUploadCertError,"on-progress":t.onUploadCertProgress}},[r("a",{attrs:{role:"button",title:"上传设备国密证书"}},[r("i",{staticClass:"fa fa-upload"}),t._v(" 上传设备证书\r\n                ")])])],1)]),t._v(" "),r("div",{class:{"form-group":!0,"has-error":t.errors.has("user_agent")}},[r("label",{staticClass:"col-sm-4 control-label"},[t._v("UA\r\n        ")]),t._v(" "),r("div",{staticClass:"col-sm-7"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.user_agent,expression:"form.user_agent",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"user_agent",placeholder:"为空时不限接入UA","data-vv-as":"UA"},domProps:{value:t.form.user_agent},on:{input:function(e){e.target.composing||t.$set(t.form,"user_agent",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),r("div",{class:{"form-group":!0,"has-error":t.errors.has("remote_ip")}},[r("label",{staticClass:"col-sm-4 control-label"},[t._v("IP\r\n        ")]),t._v(" "),r("div",{staticClass:"col-sm-7"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.remote_ip,expression:"form.remote_ip",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"remote_ip",placeholder:"为空时不限接入IP","data-vv-as":"IP"},domProps:{value:t.form.remote_ip},on:{input:function(e){e.target.composing||t.$set(t.form,"remote_ip",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),r("div",{class:{"form-group":!0,"has-error":t.errors.has("remote_port")}},[r("label",{staticClass:"col-sm-4 control-label"},[t._v("端口\r\n        ")]),t._v(" "),r("div",{staticClass:"col-sm-7"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.remote_port,expression:"form.remote_port",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"}],staticClass:"form-control",attrs:{type:"text",name:"remote_port",placeholder:"为空时不限接入端口","data-vv-as":"端口"},domProps:{value:t.form.remote_port},on:{input:function(e){e.target.composing||t.$set(t.form,"remote_port",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),r("div",{class:{"form-group":!0,"has-error":t.errors.has("description")}},[r("label",{staticClass:"col-sm-4 control-label"},[t._v("备注\r\n        ")]),t._v(" "),r("div",{staticClass:"col-sm-7"},[r("el-input",{attrs:{id:"input-description",type:"textarea",autosize:{minRows:1,maxRows:5},rows:1,"data-vv-as":"描述信息"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"==typeof e?e.trim():e)},expression:"form.description"}})],1)]),t._v(" "),r("div",{class:{"form-group":!0,"has-error":t.errors.has("save_device")}},[r("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-save-device"}},[t._v("其他选项\r\n        ")]),t._v(" "),r("div",{staticClass:"col-sm-7 checkbox"},[r("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"decode"},model:{value:t.form.decode,callback:function(e){t.$set(t.form,"decode","string"==typeof e?e.trim():e)},expression:"form.decode"}},[t._v("\r\n                解码器  \r\n            ")]),t._v(" "),r("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"save_device"},model:{value:t.form.save_device,callback:function(e){t.$set(t.form,"save_device","string"==typeof e?e.trim():e)},expression:"form.save_device"}},[t._v("\r\n                加到设备列表\r\n            ")])],1)])])},a=[],s={render:o,staticRenderFns:a};e.a=s},"9jbo":function(t,e,r){"use strict";function o(t){r("LCo5")}Object.defineProperty(e,"__esModule",{value:!0});var a=r("qGgj"),s=r.n(a);for(var i in a)["default","default"].indexOf(i)<0&&function(t){r.d(e,t,function(){return a[t]})}(i);var n=r("9d5M"),l=r("VU/8"),c=o,u=l(s.a,n.a,!1,c,"data-v-18ad064e",null);e.default=u.exports},AbOe:function(t,e,r){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},s=r("5gxX"),i=o(s),n=r("9jbo"),l=o(n),c=r("M4fF"),u=o(c),d=r("NYxO");e.default={props:{},data:function(){return{q:"",total:0,pageSize:10,currentPage:1,sort:"Serial",order:"asc",loading:!1,whiteList:[]}},components:{UploadDlg:i.default,WhiteEditDlg:l.default},computed:a({},(0,d.mapState)(["userInfo","serverInfo"])),mounted:function(){},beforeDestroy:function(){},methods:{ready:function(){this.$watch("q",function(t,e){this.doDelaySearch()}),this.$watch("currentPage",function(t,e){this.doSearch(t)})},download:function(){window.open("/api/v1/white/export")},uploaded:function(){this.$message({type:"success",message:"上传配置成功！"}),this.getWhiteList(),this.$refs.uploadDlg.hide()},doSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e={};this.q&&(e.q=this.q),this.$router.replace({path:"/white/"+t,query:e})},doDelaySearch:u.default.debounce(function(){this.doSearch()},800),getWhiteList:function(){var e=this;this.loading=!0,t.get("/api/v1/white/list",{q:this.q,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,sort:this.sort,order:this.order}).then(function(t){e.total=t.WhiteCount,e.whiteList=t.WhiteList}).always(function(){e.$nextTick(function(){e.loading=!1})})},sortChange:function(t){this.sort=t.prop,this.order="ascending"==t.order?"asc":"desc",this.getWhiteList()},delWhite:function(e){var r=this;this.$confirm("确认删除 "+e.Serial+" ?","提示",{lockScroll:!1}).then(function(){t.post("/api/v1/white/remove",{serial:e.Serial}).always(function(){r.getWhiteList()})}).catch(function(){})},editWhite:function(t){this.$refs.whiteEditDlg.show({serial:t.Serial,password:t.Password,user_agent:t.UserAgent,remote_ip:t.RemoteIP,remote_port:t.RemotePort||"",direction:t.Direction||0,cert:t.Cert||"",decode:t.Decode||!1,description:t.Description})},addWhite:function(t){this.$refs.whiteEditDlg.show({serial:"",password:"",description:""})},formatPassword:function(t,e,r){return 1==t.Direction?"35114 单向":2==t.Direction?"35114 双向":r},formatRemoteIP:function(t,e,r){return r||""},formatRemotePort:function(t,e,r){return r||""}},beforeRouteEnter:function(t,e,r){r(function(e){e.q=t.query.q||"",e.currentPage=parseInt(t.params.page)||1,e.ready()})},beforeRouteLeave:function(t,e,r){r()},beforeRouteUpdate:function(t,e,r){var o=this;r(),this.$nextTick(function(){o.q=t.query.q||"",o.currentPage=parseInt(t.params.page)||1,o.whiteList=[],o.total=0,o.getWhiteList()})}}}).call(e,r("0iPh"))},LCo5:function(t,e,r){var o=r("6V0a");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r("rjj0")("427a2e4e",o,!0,{})},LbQQ:function(t,e,r){var o=r("rF1v");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r("rjj0")("080cae9a",o,!0,{})},PUVY:function(t,e,r){var o=r("Ya9/");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r("rjj0")("3eaceeca",o,!0,{})},"Ya9/":function(t,e,r){e=t.exports=r("FZ+f")(!1),e.push([t.i,".opt-group .cell{overflow:visible}",""])},"gD/T":function(t,e,r){"use strict";function o(t){r("PUVY")}Object.defineProperty(e,"__esModule",{value:!0});var a=r("AbOe"),s=r.n(a);for(var i in a)["default","default"].indexOf(i)<0&&function(t){r.d(e,t,function(){return a[t]})}(i);var n=r("luRf"),l=r("VU/8"),c=o,u=l(s.a,n.a,!1,c,null,null);e.default=u.exports},lGU5:function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal fade upload-dlg",attrs:{"data-backdrop":"static","data-keyboard":"true",tabindex:"-1"}},[r("div",{staticClass:"modal-dialog"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),r("h4",{staticClass:"modal-title text-center text-info"},[r("span",[t._v(t._s(t.title))])])]),t._v(" "),r("div",{staticClass:"modal-body"},[t._t("header"),t._v(" "),r("el-upload",{ref:"uploader",attrs:{drag:t.drag,action:t.url,multiple:t.multiple,"show-file-list":t.showFileList,limit:1,"on-success":t.onSuccess,"on-progress":t.onProgress,"on-error":t.onError,"on-remove":t.onRemove,accept:t.accept,"before-upload":t.beforeUpload,"auto-upload":t.autoUpload}},[r("i",{staticClass:"el-icon-upload"}),t._v(" "),r("div",{staticClass:"el-upload__text"},[t._v("将配置数据拖到此处，或 "),r("em",[t._v("点击上传")])]),t._v(" "),r("div",{staticClass:"el-upload__tip text-center",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.tip)),r("span",{staticStyle:{color:"red"}},[t._v(" *上传成功会自动删除原有数据，请注意导出备份*")])])]),t._v(" "),t._t("footer")],2),t._v(" "),r("div",{staticClass:"modal-footer"},[r("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal",disabled:t.bProgress}},[t._v("关闭")])])])])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],s={render:o,staticRenderFns:a};e.a=s},luRf:function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"box box-primary"},[t._m(0),t._v(" "),r("div",{staticClass:"box-body"},[r("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[r("div",{staticClass:"form-group form-group-sm"},[r("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.$router.go(-1)}}},[r("i",{staticClass:"fa fa-chevron-left"}),t._v(" 返回\r\n                    ")])]),t._v(" "),r("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),r("div",{staticClass:"form-group form-group-sm"},[r("div",{staticClass:"input-group input-group-sm"},[r("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.addWhite()}}},[r("i",{staticClass:"fa fa-plus"}),t._v(" 添加白名单\r\n                    ")])])]),t._v(" "),r("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),r("div",{staticClass:"form-group form-group-sm"},[r("label",[t._v("搜索")]),t._v(" "),t.isMobile()?r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}):r("div",{staticClass:"input-group input-group-sm"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),r("div",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导出白名单数据"},on:{click:function(e){e.preventDefault(),t.download(e)}}},[r("i",{staticClass:"fa fa-download"})]),t._v(" "),r("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导入白名单数据"},on:{click:function(e){e.preventDefault(),t.$refs.uploadDlg.show()}}},[r("i",{staticClass:"fa fa-upload"})])])])])]),t._v(" "),r("br"),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.whiteList,stripe:"","default-sort":{prop:"Serial",order:"ascending"},"element-loading-text":"加载中..."},on:{"sort-change":t.sortChange}},[r("el-table-column",{attrs:{prop:"Serial",label:"设备国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),r("el-table-column",{attrs:{label:"操作","min-width":"150",fixed:!t.isMobile()&&"right","class-name":"opt-group"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"btn-group btn-group-xs"},[t.userInfo?r("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(r){r.preventDefault(),t.editWhite(e.row)}}},[r("i",{staticClass:"fa fa-edit"}),t._v(" 编辑\r\n                            ")]):t._e(),t._v(" "),t.userInfo?r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(r){r.preventDefault(),t.delWhite(e.row)}}},[r("i",{staticClass:"fa fa-remove"}),t._v(" 删除\r\n                            ")]):t._e()])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"Password",label:"接入密码","min-width":"140",formatter:t.formatPassword,"show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),r("el-table-column",{attrs:{prop:"UserAgent",label:"UA","min-width":"140","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),r("el-table-column",{attrs:{prop:"RemoteIP",label:"IP","min-width":"140",formatter:t.formatRemoteIP,"show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),r("el-table-column",{attrs:{prop:"RemotePort",label:"端口","min-width":"140",formatter:t.formatRemotePort,"show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),r("el-table-column",{attrs:{prop:"Description",label:"备注","min-width":"200","show-overflow-tooltip":"",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.Description))]),t._v(" "),e.row.Decode?r("span",{staticClass:"badge"},[t._v("解码器")]):t._e()]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"UpdatedAt",label:"更新时间","min-width":"160",sortable:"custom"}}),t._v(" "),r("el-table-column",{attrs:{prop:"CreatedAt",label:"创建时间","min-width":"160",sortable:"custom"}})],1)],1),t._v(" "),t.total>0?r("div",{staticClass:"box-footer"},[r("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next","pager-count":t.isMobile()?3:5,total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e}}})],1):t._e(),t._v(" "),r("UploadDlg",{ref:"uploadDlg",attrs:{title:"上传白名单",url:"/api/v1/white/import"},on:{uploaded:t.uploaded}}),t._v(" "),r("WhiteEditDlg",{ref:"whiteEditDlg",attrs:{serverInfo:t.serverInfo,userInfo:t.userInfo},on:{submit:t.getWhiteList}})],1)])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box-header"},[r("h4",{staticClass:"text-primary text-center"},[t._v("白名单")])])}],s={render:o,staticRenderFns:a};e.a=s},qGgj:function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function o(a,s){try{var i=e[a](s),n=i.value}catch(t){return void r(t)}if(!i.done)return Promise.resolve(n).then(function(t){o("next",t)},function(t){o("throw",t)});t(n)}return o("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var s=r("A9K1"),i=o(s),n=r("0iPh"),l=o(n);e.default={props:{serverInfo:{type:Object,default:function(){}},userInfo:{type:Object,default:function(){return null}}},data:function(){return{form:this.defForm(),debug:!1,bRawPwd:!0,bCertUploading:!1,showDirection:!1}},components:{FormDlg:i.default},beforeDestroy:function(){(0,l.default)(this.$el).off("keydown",this.keyDown)},methods:{defForm:function(){return{oper:"edit",serial:"",description:"",password:"",user_agent:"",remote_ip:"",remote_port:"",save_device:!1,direction:0,cert:"",decode:!1}},onHide:function(){this.debug=!1,this.bCertUploading=!1,this.showDirection=!1,this.form=this.defForm(),this.$emit("hide"),(0,l.default)(this.$el).off("keydown",this.keyDown)},onShow:function(){this.bRawPwd=!1,this.errors.clear(),this.$emit("show"),this.form.serial||(this.form.oper="add",this.$el.querySelector("[name=serial]").focus()),(0,l.default)(this.$el).on("keydown",this.keyDown)},keyDown:function(t){if(t.altKey&&t.shiftKey)switch(t.key){case"D":t.preventDefault(),this.toggleDebug()}},toggleDebug:function(){this.debug=!this.debug},onSubmit:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(r=e.sent){e.next=8;break}return o=t.errors.items[0],t.$message({type:"error",message:o.msg}),(0,l.default)("[name="+o.field+"]").focus(),e.abrupt("return");case 8:l.default.post("/api/v1/white/save",t.form).then(function(e){t.$refs.dlg.hide(),t.$emit("submit")});case 9:case"end":return e.stop()}},e,t)}))()},show:function(t){var e=this;this.bRawPwd=!0,this.errors.clear(),t&&(Object.assign(this.form,t),0===this.form.remote_port&&(this.form.remote_port="")),this.showDirection=this.serverInfo.GM||this.form.direction,this.$nextTick(function(){e.$refs.dlg.show()})},onUploadCertSuccess:function(t,e,r){this.bCertUploading=!1,this.form.cert=t},onUploadCertProgress:function(t,e,r){this.bCertUploading=!0},onUploadCertError:function(t,e,r){this.bCertUploading=!1,t&&this.$message({type:"error",message:t+""})},removeCert:function(){var t=this;(0,l.default)(this.$el).hide(),this.$confirm("确认删除设备证书?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1}).then(function(){(0,l.default)(t.$el).show().focus(),l.default.post("/api/v1/gm/cert/remove?serial="+t.form.serial).then(function(){t.form.cert=""})}).catch(function(){(0,l.default)(t.$el).show().focus()})}}}},qb8i:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r("F8S1");var o=r("0iPh"),a=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={props:{title:{default:"上传"},url:{type:String,default:""},multiple:{type:Boolean,default:!1},drag:{type:Boolean,default:!0},showFileList:{type:Boolean,default:!0},accept:{default:".xlsx"},tip:{default:"仅限上传.xlsx"},limit:{type:Number,default:0},autoUpload:{type:Boolean,default:!0}},data:function(){return{bShow:!1,bProgress:!1}},mounted:function(){var t=this;(0,a.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,a.default)(this.$el).on("shown.bs.modal",function(){t.$emit("show"),t.bShow=!0}).on("hidden.bs.modal",function(){t.$emit("hide"),t.bShow=!1,t.$refs.uploader.clearFiles()}).on("hide.bs.modal",function(){if(t.bProgress)return t.$message({type:"error",message:"正在上传, 请稍后..."}),!1})},methods:{show:function(){(0,a.default)(this.$el).modal("show")},hide:function(){(0,a.default)(this.$el).modal("hide")},beforeUpload:function(t){return!(this.limit&&t.size>this.limit)||(this.$message({type:"error",message:"文件["+t.name+"]大小超过限制["+this.limit+"], 不能上传!"}),!1)},onSuccess:function(t,e,r){var o=!0,a=!1,s=void 0;try{for(var i,n=r[Symbol.iterator]();!(o=(i=n.next()).done);o=!0){var l=i.value;if(100!=l.percentage&&0!==l.percentage)return void(this.bProgress=!0)}}catch(t){a=!0,s=t}finally{try{!o&&n.return&&n.return()}finally{if(a)throw s}}this.bProgress=!1,this.$emit("uploaded",e)},onProgress:function(t,e,r){this.bProgress=!0},onError:function(t,e,r){t&&this.$message({type:"error",message:t+""});var o=!0,a=!1,s=void 0;try{for(var i,n=r[Symbol.iterator]();!(o=(i=n.next()).done);o=!0){var l=i.value;if(100!=l.percentage&&0!==l.percentage)return void(this.bProgress=!0)}}catch(t){a=!0,s=t}finally{try{!o&&n.return&&n.return()}finally{if(a)throw s}}this.bProgress=!1},onRemove:function(t,e){var r=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var n=s.value;if(100!=n.percentage&&0!==n.percentage)return void(this.bProgress=!0)}}catch(t){o=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}this.bProgress=!1}}}},rF1v:function(t,e,r){e=t.exports=r("FZ+f")(!1),e.push([t.i,".upload-dlg .modal-dialog .modal-body{overflow:hidden}.upload-dlg .modal-dialog .modal-body .el-upload{display:block}.upload-dlg .modal-dialog .modal-body .el-upload .el-upload-dragger{margin:0 auto}",""])}});